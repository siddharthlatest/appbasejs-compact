!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[s]={exports:{}};t[s][0].call(h.exports,function(e){var r=t[s][1][e];return o(r?r:e)},h,h.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var o,i=typeof e;if("number"===i)o=e>0?e>>>0:0;else if("string"===i)"base64"===t&&(e=k(e)),o=n.byteLength(e,t);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&B(e.data)&&(e=e.data),o=+e.length>0?Math.floor(+e.length):0}if(this.length>N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(o)):(s=this,s.length=o,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(A(e))if(n.isBuffer(e))for(a=0;o>a;a++)s[a]=e.readUInt8(a);else for(a=0;o>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===i)s.write(e,0,t);else if("number"===i&&!n.TYPED_ARRAY_SUPPORT&&!r)for(a=0;o>a;a++)s[a]=0;return s}function o(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[r+s]=a}return s}function i(e,t,r,n){var o=L(T(t),e,r,n);return o}function s(e,t,r,n){var o=L(j(t),e,r,n);return o}function a(e,t,r,n){return s(e,t,r,n)}function c(e,t,r,n){var o=L(R(t),e,r,n);return o}function u(e,t,r,n){var o=L(C(t),e,r,n);return o}function h(e,t,r){return P.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function l(e,t,r){var n="",o="";r=Math.min(e.length,r);for(var i=t;r>i;i++)e[i]<=127?(n+=O(o)+String.fromCharCode(e[i]),o=""):o+="%"+e[i].toString(16);return n+O(o)}function f(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;o++)n+=String.fromCharCode(e[o]);return n}function p(e,t,r){return f(e,t,r)}function d(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=t;r>i;i++)o+=S(e[i]);return o}function g(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function v(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,r,o,i,s){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||s>t)throw new TypeError("value is out of bounds");if(r+o>e.length)throw new TypeError("index out of range")}function m(e,t,r,n){0>t&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);i>o;o++)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function b(e,t,r,n){0>t&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);i>o;o++)e[r+o]=t>>>8*(n?o:3-o)&255}function w(e,t,r,n,o,i){if(t>o||i>t)throw new TypeError("value is out of bounds");if(r+n>e.length)throw new TypeError("index out of range")}function _(e,t,r,n,o){return o||w(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),U.write(e,t,r,n,23,4),r+4}function x(e,t,r,n,o){return o||w(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),U.write(e,t,r,n,52,8),r+8}function k(e){for(e=E(e).replace(I,"");e.length%4!==0;)e+="=";return e}function E(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function A(e){return B(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function S(e){return 16>e?"0"+e.toString(16):e.toString(16)}function T(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(n);else{var o=r;n>=55296&&57343>=n&&r++;for(var i=encodeURIComponent(e.slice(o,r+1)).substr(1).split("%"),s=0;s<i.length;s++)t.push(parseInt(i[s],16))}}return t}function j(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function C(e){for(var t,r,n,o=[],i=0;i<e.length;i++)t=e.charCodeAt(i),r=t>>8,n=t%256,o.push(n),o.push(r);return o}function R(e){return P.toByteArray(e)}function L(e,t,r,n){for(var o=0;n>o&&!(o+r>=t.length||o>=e.length);o++)t[o+r]=e[o];return o}function O(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var P=e("base64-js"),U=e("ieee754"),B=e("is-array");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var N=1073741823;n.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(e){return!(null==e||!e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,o=t.length,i=0,s=Math.min(r,o);s>i&&e[i]===t[i];i++);return i!==s&&(r=e[i],o=t[i]),o>r?-1:r>o?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!B(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new n(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var o=new n(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(o,i),i+=s.length}return o},n.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=T(e).length;break;case"base64":r=R(e).length;break;default:r=e.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(e,t,r){var n=!1;if(t>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return d(this,t,r);case"utf8":case"utf-8":return l(this,t,r);case"ascii":return f(this,t,r);case"binary":return p(this,t,r);case"base64":return h(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return n.compare(this,e)},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var h=n;n=t,t=r,r=h}t=Number(t)||0;var l=this.length-t;r?(r=Number(r),r>l&&(r=l)):r=l,n=String(n||"utf8").toLowerCase();var f;switch(n){case"hex":f=o(this,e,t,r);break;case"utf8":case"utf-8":f=i(this,e,t,r);break;case"ascii":f=s(this,e,t,r);break;case"binary":f=a(this,e,t,r);break;case"base64":f=c(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=u(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+n)}return f},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){var r=this.length;if(e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e),n.TYPED_ARRAY_SUPPORT)return n._augment(this.subarray(e,t));for(var o=t-e,i=new n(o,void 0,!0),s=0;o>s;s++)i[s]=this[s+e];return i},n.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),U.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),U.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),U.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),U.read(this,e,!1,52,8)},n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):m(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):m(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):b(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):m(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):m(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):b(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,o){var i=this;if(r||(r=0),o||0===o||(o=this.length),t||(t=0),o!==r&&0!==e.length&&0!==i.length){if(r>o)throw new TypeError("sourceEnd < sourceStart");if(0>t||t>=e.length)throw new TypeError("targetStart out of bounds");if(0>r||r>=i.length)throw new TypeError("sourceStart out of bounds");if(0>o||o>i.length)throw new TypeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-r&&(o=e.length-t+r);var s=o-r;if(100>s||!n.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t)}},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new TypeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new TypeError("start out of bounds");if(0>r||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var o=T(e.toString()),i=o.length;for(n=t;r>n;n++)this[n]=o[n%i]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var D=n.prototype;n._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=D.get,e.set=D.set,e.write=D.write,e.toString=D.toString,e.toLocaleString=D.toString,e.toJSON=D.toJSON,e.equals=D.equals,e.compare=D.compare,e.copy=D.copy,e.slice=D.slice,e.readUInt8=D.readUInt8,e.readUInt16LE=D.readUInt16LE,e.readUInt16BE=D.readUInt16BE,e.readUInt32LE=D.readUInt32LE,e.readUInt32BE=D.readUInt32BE,e.readInt8=D.readInt8,e.readInt16LE=D.readInt16LE,e.readInt16BE=D.readInt16BE,e.readInt32LE=D.readInt32LE,e.readInt32BE=D.readInt32BE,e.readFloatLE=D.readFloatLE,e.readFloatBE=D.readFloatBE,e.readDoubleLE=D.readDoubleLE,e.readDoubleBE=D.readDoubleBE,e.writeUInt8=D.writeUInt8,e.writeUInt16LE=D.writeUInt16LE,e.writeUInt16BE=D.writeUInt16BE,e.writeUInt32LE=D.writeUInt32LE,e.writeUInt32BE=D.writeUInt32BE,e.writeInt8=D.writeInt8,e.writeInt16LE=D.writeInt16LE,e.writeInt16BE=D.writeInt16BE,e.writeInt32LE=D.writeInt32LE,e.writeInt32BE=D.writeInt32BE,e.writeFloatLE=D.writeFloatLE,e.writeFloatBE=D.writeFloatBE,e.writeDoubleLE=D.writeDoubleLE,e.writeDoubleBE=D.writeDoubleBE,e.fill=D.fill,e.inspect=D.inspect,e.toArrayBuffer=D.toArrayBuffer,e};var I=/[^+\/0-9A-z]/g},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s?62:t===a?63:c>t?-1:c+10>t?t-c+26+26:h+26>t?t-h:u+26>t?t-u+26:void 0}function r(e){function r(e){u[l++]=e}var n,o,s,a,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=e.length;c="="===e.charAt(h-2)?2:"="===e.charAt(h-1)?1:0,u=new i(3*e.length/4-c),s=c>0?e.length-4:e.length;var l=0;for(n=0,o=0;s>n;n+=4,o+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===c?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&a)):1===c&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(a>>8&255),r(255&a)),u}function o(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var o,i,s,a=e.length%3,c="";for(o=0,s=e.length-a;s>o;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],c+=r(i);switch(a){case 1:i=e[e.length-1],c+=t(i>>2),c+=t(i<<4&63),c+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],c+=t(i>>10),c+=t(i>>4&63),c+=t(i<<2&63),c+="="}return c}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),h="A".charCodeAt(0);e.toByteArray=r,e.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)},{}],3:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?o-1:0,f=r?-1:1,p=e[t+l];for(l+=f,i=p&(1<<-h)-1,p>>=-h,h+=a;h>0;i=256*i+e[t+l],l+=f,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=n;h>0;s=256*s+e[t+l],l+=f,h-=8);if(0===i)i=1-u;else{if(i===c)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),i-=u}return(p?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,h=(1<<u)-1,l=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+l>=1?f/c:f*Math.pow(2,1-l),t*c>=2&&(s++,c/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+p]=255&s,p+=d,s/=256,u-=8);e[r+p-d]|=128*g}},{}],4:[function(e,t){var r=Array.isArray,n=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],5:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];r.apply(this,a)}else if(i(r)){for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];for(u=r.slice(),o=u.length,c=0;o>c;c++)u[c].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,s,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=s;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=a;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],6:[function(e,t){var r=t.exports,n=(e("events").EventEmitter,e("./lib/request")),o=e("url");r.request=function(e,t){"string"==typeof e&&(e=o.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.protocol||(e.protocol=e.scheme?e.scheme+":":window.location.protocol),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https:"==e.protocol?443:80);var r=new n(new i,e);return t&&r.on("response",t),r},r.get=function(e,t){e.method="GET";var n=r.request(e,t);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var i=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var r=new window.ActiveXObject(e[t]);return function(){if(r){var n=r;return r=null,n}return new window.ActiveXObject(e[t])}}catch(n){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":7,events:5,url:32}],7:[function(e,t){var r=e("stream"),n=e("./response"),o=e("Base64"),i=e("inherits"),s=t.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.protocol||"http:")+"//"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(i){}if(t.responseType)try{e.responseType=t.responseType}catch(i){}if(e.open(t.method||"GET",r.uri,!0),e.onerror=function(){r.emit("error",new Error("Network error"))},r._headers={},t.headers)for(var s=a(t.headers),c=0;c<s.length;c++){var u=s[c];if(r.isSafeRequestHeader(u)){var h=t.headers[u];r.setHeader(u,h)}}t.auth&&this.setHeader("Authorization","Basic "+o.btoa(t.auth));var l=new n;l.on("close",function(){r.emit("close")}),l.on("ready",function(){r.emit("response",l)}),l.on("error",function(e){r.emit("error",e)}),e.onreadystatechange=function(){e.__aborted||l.handle(e)}};i(s,r),s.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},s.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},s.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},s.prototype.write=function(e){this.body.push(e)},s.prototype.destroy=function(){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=a(this._headers),r=0;r<t.length;r++){var n=t[r],o=this._headers[n];if(c(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(n,o[i]);else this.xhr.setRequestHeader(n,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){for(var s=[],r=0;r<this.body.length;r++)s.push.apply(s,this.body[r]);this.xhr.send(s)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var u=0,r=0;r<this.body.length;r++)u+=this.body[r].length;for(var s=new this.body[0].constructor(u),l=0,r=0;r<this.body.length;r++)for(var f=this.body[r],i=0;i<f.length;i++)s[l++]=f[i];this.xhr.send(s)}else if(h(this.body[0]))this.xhr.send(this.body[0]);else{for(var s="",r=0;r<this.body.length;r++)s+=this.body[r].toString();this.xhr.send(s)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(e){return e?-1===u(s.unsafeHeaders,e.toLowerCase()):!1};var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},h=function(e){return"undefined"!=typeof Blob&&e instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&e instanceof FormData?!0:void 0}},{"./response":8,Base64:9,inherits:11,stream:30}],8:[function(e,t){function r(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<t.length;n++){var o=t[n];if(""!==o){var i=o.match(/^([^:]+):\s*(.*)/);if(i){var s=i[1].toLowerCase(),c=i[2];void 0!==r[s]?a(r[s])?r[s].push(c):r[s]=[r[s],c]:r[s]=c}else r[o]=!0}}return r}var n=e("stream"),o=e("util"),i=t.exports=function(){this.offset=0,this.readable=!0};o.inherits(i,n);var s={streaming:!0,status2:!0};i.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},i.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},i.prototype.handle=function(e){if(2===e.readyState&&s.status2){try{this.statusCode=e.status,this.headers=r(e)}catch(t){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=r(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){s.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},i.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{stream:30,util:34}],9:[function(e,t,r){!function(){function e(e){this.message=e}var t="undefined"!=typeof r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,o,i=0,s=n,a="";t.charAt(0|i)||(s="=",i%1);a+=s.charAt(63&r>>8-i%1*8)){if(o=t.charCodeAt(i+=.75),o>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|o}return a}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,s=0,a="";o=t.charAt(s++);~o&&(r=i%4?64*r+o:o,i++%4)?a+=String.fromCharCode(255&r>>(-2*i&6)):0)o=n.indexOf(o);return a})}()},{}],10:[function(e,t){var r=e("http"),n=t.exports;for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);n.request=function(e,t){return e||(e={}),e.scheme="https",r.request.call(this,e,t)}},{http:6}],11:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],12:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],13:[function(e,t,r){r.endianness=function(){return"LE"},r.hostname=function(){return"undefined"!=typeof location?location.hostname:""},r.loadavg=function(){return[]},r.uptime=function(){return 0},r.freemem=function(){return Number.MAX_VALUE},r.totalmem=function(){return Number.MAX_VALUE},r.cpus=function(){return[]},r.type=function(){return"Browser"},r.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},r.networkInterfaces=r.getNetworkInterfaces=function(){return{}},r.arch=function(){return"javascript"},r.platform=function(){return"browser"},r.tmpdir=r.tmpDir=function(){return"/tmp"},r.EOL="\n"},{}],14:[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var o=document.createElement("div"),i=new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})});return i.observe(o,{attributes:!0}),function(e){n.length||o.setAttribute("yes","no"),n.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],15:[function(e,t,r){(function(e){!function(n){function o(e){throw RangeError(P[e])}function i(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function s(e,t){return i(e.split(O),t).join(".")}function a(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function c(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:x}function h(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function l(e,t,r){var n=0;for(e=r?B(e/S):e>>1,e+=B(e/t);e>U*E>>1;n+=x)e=B(e/U);return B(n+(U+1)*e/(e+A))}function f(e){var t,r,n,i,s,a,h,f,p,d,g=[],v=e.length,y=0,m=j,b=T;for(r=e.lastIndexOf(C),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;v>i;){for(s=y,a=1,h=x;i>=v&&o("invalid-input"),f=u(e.charCodeAt(i++)),(f>=x||f>B((_-y)/a))&&o("overflow"),y+=f*a,p=b>=h?k:h>=b+E?E:h-b,!(p>f);h+=x)d=x-p,a>B(_/d)&&o("overflow"),a*=d;t=g.length+1,b=l(y-s,t,0==s),B(y/t)>_-m&&o("overflow"),m+=B(y/t),y%=t,g.splice(y++,0,m)}return c(g)}function p(e){var t,r,n,i,s,c,u,f,p,d,g,v,y,m,b,w=[];for(e=a(e),v=e.length,t=j,r=0,s=T,c=0;v>c;++c)g=e[c],128>g&&w.push(N(g));for(n=i=w.length,i&&w.push(C);v>n;){for(u=_,c=0;v>c;++c)g=e[c],g>=t&&u>g&&(u=g);for(y=n+1,u-t>B((_-r)/y)&&o("overflow"),r+=(u-t)*y,t=u,c=0;v>c;++c)if(g=e[c],t>g&&++r>_&&o("overflow"),g==t){for(f=r,p=x;d=s>=p?k:p>=s+E?E:p-s,!(d>f);p+=x)b=f-d,m=x-d,w.push(N(h(d+b%m,0))),f=B(b/m);w.push(N(h(f,0))),s=l(r,y,n==i),r=0,++n
}++r,++t}return w.join("")}function d(e){return s(e,function(e){return R.test(e)?f(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return L.test(e)?"xn--"+p(e):e})}var v="object"==typeof r&&r,y="object"==typeof t&&t&&t.exports==v&&t,m="object"==typeof e&&e;(m.global===m||m.window===m)&&(n=m);var b,w,_=2147483647,x=36,k=1,E=26,A=38,S=700,T=72,j=128,C="-",R=/^xn--/,L=/[^ -~]/,O=/\x2E|\u3002|\uFF0E|\uFF61/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=x-k,B=Math.floor,N=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:a,encode:c},decode:f,encode:p,toASCII:g,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(v&&!v.nodeType)if(y)y.exports=b;else for(w in b)b.hasOwnProperty(w)&&(v[w]=b[w]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,o,i){t=t||"&",o=o||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var h=0;u>h;++h){var l,f,p,d,g=e[h].replace(a,"%20"),v=g.indexOf(o);v>=0?(l=g.substr(0,v),f=g.substr(v+1)):(l=g,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),r(s,p)?n(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],17:[function(e,t){"use strict";function r(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var a=encodeURIComponent(n(i))+s;return o(e[i])?r(e[i],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[i]))}).join(t):a?encodeURIComponent(n(a))+s+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],18:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":16,"./encode":17}],19:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":20}],20:[function(e,t){(function(r){function n(e){return this instanceof n?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new n(e)}function o(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function i(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}t.exports=n;var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=e("core-util-is");a.inherits=e("inherits");var c=e("./_stream_readable"),u=e("./_stream_writable");a.inherits(n,c),i(s(u.prototype),function(e){n.prototype[e]||(n.prototype[e]=u.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":22,"./_stream_writable":24,_process:14,"core-util-is":25,inherits:11}],21:[function(e,t){function r(e){return this instanceof r?void n.call(this,e):new r(e)}t.exports=r;var n=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,n),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":23,"core-util-is":25,inherits:11}],22:[function(e,t){(function(r){function n(t){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(j||(j=e("string_decoder/").StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function o(e){return this instanceof o?(this._readableState=new n(e,this),this.readable=!0,void S.call(this)):new o(e)}function i(e,t,r,n,o){var i=u(t,r);if(i)e.emit("error",i);else if(null===r||void 0===r)t.reading=!1,t.ended||h(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!o){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&o){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||o||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,o?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&l(e),p(e,t);else o||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=C)e=C;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var r=null;return E.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function h(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?l(e):w(e)}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){f(e)}):f(e))}function f(e){e.emit("readable")}function p(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){d(e,t)}))}function d(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&v(e)}}function v(e){function t(e){var t=e.write(r);!1===t&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):_(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(A.listenerCount(e,"data")>0&&m(e))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,v(this))}function m(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var o=t||!1,i=!1;e.readable=!0,e.pipe=S.prototype.pipe,e.on=e.addListener=S.prototype.on,e.on("readable",function(){i=!0;for(var t;!o&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){o=!0,this.emit("pause")},e.resume=function(){o=!1,i?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var r,n=t.buffer,o=t.length,i=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(s)r=n.shift();else if(!e||e>=o)r=i?n.join(""):E.concat(n,o),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=i?"":new E(e);for(var c=0,u=0,h=n.length;h>u&&e>c;u++){var a=n[0],l=Math.min(e-c,a.length);i?r+=a.slice(0,l):a.copy(r,c,0,l),l<a.length?n[0]=a.slice(l):n.shift(),c+=l}}return r}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function x(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=o;var k=e("isarray"),E=e("buffer").Buffer;o.ReadableState=n;var A=e("events").EventEmitter;A.listenerCount||(A.listenerCount=function(e,t){return e.listeners(t).length});var S=e("stream"),T=e("core-util-is");T.inherits=e("inherits");var j;T.inherits(o,S),o.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new E(e,t),t="")),i(this,r,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return i(this,t,e,"",!0)},o.prototype.setEncoding=function(t){j||(j=e("string_decoder/").StringDecoder),this._readableState.decoder=new j(t),this._readableState.encoding=t};var C=8388608;o.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l(this),null;if(e=c(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=b(e,t),t.length-=r.length),0===t.length&&w(this),r;var o=t.needReadable;return t.length-e<=t.highWaterMark&&(o=!0),(t.ended||t.reading)&&(o=!1),o&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),o&&!t.reading&&(e=c(n,t)),r=e>0?b(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),r},o.prototype._read=function(){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(e,t){function n(e){e===h&&i()}function o(){e.end()}function i(){e.removeListener("close",a),e.removeListener("finish",c),e.removeListener("drain",d),e.removeListener("error",s),e.removeListener("unpipe",n),h.removeListener("end",o),h.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&d()}function s(t){u(),e.removeListener("error",s),0===A.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",c),u()}function c(){e.removeListener("close",a),u()}function u(){h.unpipe(e)}var h=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1;var f=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,p=f?o:i;l.endEmitted?r.nextTick(p):h.once("end",p),e.on("unpipe",n);var d=g(h);return e.on("drain",d),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",c),e.emit("pipe",h),l.flowing||(this.on("readable",y),l.flowing=!0,r.nextTick(function(){v(h)})),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var o=0;n>o;o++)r[o].emit("unpipe",this);return this}var o=x(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=S.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||m(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&l(this,n):this.read(0))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},o.prototype.pause=function(){m(this,!0),this.emit("pause")},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(o){if(t.decoder&&(o=t.decoder.write(o)),(!t.objectMode||null!==o&&void 0!==o)&&(t.objectMode||o&&o.length)){var i=n.push(o);i||(r=!0,e.pause())}});for(var o in e)"function"==typeof e[o]&&"undefined"==typeof this[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return _(i,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(){r&&(r=!1,e.resume())},n},o._fromList=b}).call(this,e("_process"))},{_process:14,buffer:1,"core-util-is":25,events:5,inherits:11,isarray:12,stream:30,"string_decoder/":31}],23:[function(e,t){function r(e,t){this.afterTransform=function(e,r){return n(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(e,t,r){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),o&&o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){i(t,e)}):i(t)})}function i(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":20,"core-util-is":25,inherits:11}],24:[function(e,t){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function o(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(t){var r=e("./_stream_duplex");return this instanceof i||this instanceof r?(this._writableState=new o(t,this),this.writable=!0,void x.call(this)):new i(t)}function s(e,t,n){var o=new Error("write after end");e.emit("error",o),r.nextTick(function(){n(o)})}function a(e,t,n,o){var i=!0;if(!w.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){o(s)}),i=!1}return i}function c(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new w(t,r)),t}function u(e,t,r,o,i){r=c(t,r,o),w.isBuffer(r)&&(o="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,o,i)):h(e,t,s,r,o,i),a}function h(e,t,r,n,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,o,t.onwrite),t.sync=!1}function l(e,t,n,o,i){n?r.nextTick(function(){i(o)}):i(o),e._writableState.errorEmitted=!0,e.emit("error",o)}function f(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,o=n.sync,i=n.writecb;if(f(n),t)l(e,n,o,t,i);else{var s=y(e,n);s||n.bufferProcessing||!n.buffer.length||v(e,n),o?r.nextTick(function(){d(e,n,s,i)}):d(e,n,s,i)}}function d(e,t,r,n){r||g(e,t),n(),r&&m(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],o=n.chunk,i=n.encoding,s=n.callback,a=t.objectMode?1:o.length;if(h(e,t,a,o,i,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function m(e,t){var r=y(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function b(e,t,n){t.ending=!0,m(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=i;var w=e("buffer").Buffer;i.WritableState=o;var _=e("core-util-is");_.inherits=e("inherits");var x=e("stream");_.inherits(i,x),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,r){var n=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),w.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,e,r)&&(o=u(this,n,e,t,r)),o},i.prototype._write=function(e,t,r){r(new Error("not implemented"))},i.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||b(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":20,_process:14,buffer:1,"core-util-is":25,inherits:11,stream:30}],25:[function(e,t,r){(function(e){function t(e){return Array.isArray(e)}function n(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function h(e){return l(e)&&"[object RegExp]"===y(e)}function l(e){return"object"==typeof e&&null!==e}function f(e){return l(e)&&"[object Date]"===y(e)}function p(e){return l(e)&&("[object Error]"===y(e)||e instanceof Error)}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(t){return e.isBuffer(t)}function y(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=o,r.isNullOrUndefined=i,r.isNumber=s,r.isString=a,r.isSymbol=c,r.isUndefined=u,r.isRegExp=h,r.isObject=l,r.isDate=f,r.isError=p,r.isFunction=d,r.isPrimitive=g,r.isBuffer=v}).call(this,e("buffer").Buffer)},{buffer:1}],26:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":21}],27:[function(e,t,r){e("stream"),r=t.exports=e("./lib/_stream_readable.js"),r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":20,"./lib/_stream_passthrough.js":21,"./lib/_stream_readable.js":22,"./lib/_stream_transform.js":23,"./lib/_stream_writable.js":24,stream:30}],28:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":23}],29:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":24}],30:[function(e,t){function r(){n.call(this)}t.exports=r;var n=e("events").EventEmitter,o=e("inherits");o(r,n),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function o(){u.readable&&u.resume&&u.resume()}function i(){h||(h=!0,e.end())}function s(){h||(h=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",r),e.removeListener("drain",o),u.removeListener("end",i),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",r),e.on("drain",o),e._isStdio||t&&t.end===!1||(u.on("end",i),u.on("close",s));var h=!1;return u.on("error",a),e.on("error",a),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},{events:5,inherits:11,"readable-stream/duplex.js":19,"readable-stream/passthrough.js":26,"readable-stream/readable.js":27,"readable-stream/transform.js":28,"readable-stream/writable.js":29}],31:[function(e,t,r){function n(e){if(e&&!c(e))throw new Error("Unknown encoding: "+e)}function o(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,c=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=o)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,o),o-=this.charReceived),t+=e.toString(this.encoding,0,o);var o=t.length-1,n=t.charCodeAt(o);if(n>=55296&&56319>=n){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,o)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,o=this.encoding;t+=n.slice(0,r).toString(o)}return t}},{buffer:1}],32:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&u(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return c(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function h(e){return null===e}function l(e){return null==e}var f=e("punycode");r.parse=o,r.resolve=s,r.resolveObject=a,r.format=i,r.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(g),y=["'"].concat(v),m=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,_=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");n.prototype.parse=function(e,t,r){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var o=p.exec(n);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||o&&E[o]||(n=n.substr(2),this.slashes=!0)}if(!E[o]&&(s||o&&!A[o])){for(var a=-1,u=0;u<b.length;u++){var h=n.indexOf(b[u]);-1!==h&&(-1===a||a>h)&&(a=h)}var l,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(l=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(l)),a=-1;for(var u=0;u<m.length;u++){var h=n.indexOf(m[u]);-1!==h&&(-1===a||a>h)&&(a=h)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),u=0,T=v.length;T>u;u++){var j=v[u];if(j&&!j.match(_)){for(var C="",R=0,L=j.length;L>R;R++)C+=j.charCodeAt(R)>127?"x":j[R];if(!C.match(_)){var O=v.slice(0,u),P=v.slice(u+1),U=j.match(x);U&&(O.push(U[1]),P.unshift(U[2])),P.length&&(n="/"+P.join(".")+n),this.hostname=O.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!g){for(var B=this.hostname.split("."),N=[],u=0;u<B.length;++u){var D=B[u];N.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(D):D)}this.hostname=N.join(".")}var I=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+I,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!k[i])for(var u=0,T=y.length;T>u;u++){var H=y[u],M=encodeURIComponent(H);M===H&&(M=escape(H)),n=n.split(H).join(M)}var F=n.indexOf("#");-1!==F&&(this.hash=n.substr(F),n=n.slice(0,F));var z=n.indexOf("?");if(-1!==z?(this.search=n.substr(z),this.query=n.substr(z+1),t&&(this.query=S.parse(this.query)),n=n.slice(0,z)):t&&(this.search="",this.query={}),n&&(this.pathname=n),A[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",D=this.search||"";this.path=I+D}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(i=S.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||A[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),A[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!A[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||E[e.protocol])r.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var i=r.pathname||"",s=r.search||"";r.path=i+s}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=u||a||r.host&&e.pathname,p=f,d=r.pathname&&r.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],g=r.protocol&&!A[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),f=f&&(""===o[0]||""===d[0])),u)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=e.search,r.query=e.query;else if(!l(e.search)){if(g){r.hostname=r.host=d.shift();var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return r.search=e.search,r.query=e.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var y=d.slice(-1)[0],m=(r.host||e.host)&&("."===y||".."===y)||""===y,b=0,w=d.length;w>=0;w--)y=d[w],"."==y?d.splice(w,1):".."===y?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!f&&!p)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var _=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){r.hostname=r.host=_?"":d.length?d.shift():"";var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return f=f||r.host&&d.length,f&&!_&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:15,querystring:18}],33:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],34:[function(e,t,r){(function(t,n){function o(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&r._extend(n,t),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),c(n,e,n.depth)}function i(e,t){var r=o.styles[t];return r?"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m":e}function s(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return b(o)||(o=c(e,o,n)),o}var i=u(e,t);if(i)return i;var s=Object.keys(t),g=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),A(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(t);if(0===s.length){if(S(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return h(t)}var y="",m=!1,w=["{","}"];if(d(t)&&(m=!0,w=["[","]"]),S(t)){var _=t.name?": "+t.name:"";y=" [Function"+_+"]"}if(x(t)&&(y=" "+RegExp.prototype.toString.call(t)),E(t)&&(y=" "+Date.prototype.toUTCString.call(t)),A(t)&&(y=" "+h(t)),0===s.length&&(!m||0==t.length))return w[0]+y+w[1];
if(0>n)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=m?l(e,t,n,g,s):s.map(function(r){return f(e,t,n,g,r,m)}),e.seen.pop(),p(k,y,w)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,o){for(var i=[],s=0,a=t.length;a>s;++s)i.push(L(t,String(s))?f(e,t,r,n,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(e,t,r,n,o,!0))}),i}function f(e,t,r,n,o,i){var s,a,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),L(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(u.value)<0?(a=v(r)?c(e,u.value,null):c(e,u.value,r-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e,t,r){var n=0,o=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function x(e){return k(e)&&"[object RegExp]"===j(e)}function k(e){return"object"==typeof e&&null!==e}function E(e){return k(e)&&"[object Date]"===j(e)}function A(e){return k(e)&&("[object Error]"===j(e)||e instanceof Error)}function S(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function j(e){return Object.prototype.toString.call(e)}function C(e){return 10>e?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var O=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(e).replace(O,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),a=n[r];i>r;a=n[++r])s+=v(a)||!k(a)?" "+a:" "+o(a);return s},r.deprecate=function(e,o){function i(){if(!s){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),s=!0}return e.apply(this,arguments)}if(_(n.process))return function(){return r.deprecate(e,o).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return i};var P,U={};r.debuglog=function(e){if(_(P)&&(P=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!U[e])if(new RegExp("\\b"+e+"\\b","i").test(P)){var n=t.pid;U[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else U[e]=function(){};return U[e]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=v,r.isNullOrUndefined=y,r.isNumber=m,r.isString=b,r.isSymbol=w,r.isUndefined=_,r.isRegExp=x,r.isObject=k,r.isDate=E,r.isError=A,r.isFunction=S,r.isPrimitive=T,r.isBuffer=e("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",R(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":33,_process:14,inherits:11}],35:[function(e){!function t(r,n,o){function i(a,c){if(!n[a]){if(!r[a]){var u="function"==typeof e&&e;if(!c&&u)return u(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var h=n[a]={exports:{}};r[a][0].call(h.exports,function(e){var t=r[a][1][e];return i(t?t:e)},h,h.exports,t,r,n,o)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t){t.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.2.4",options:{}}},{}],2:[function(e,t){"use strict";var r,n,o,i,s,a;o=e("../config"),i=e("../tools/cookies"),n=e("../tools/cache"),r=e("../tools/url"),a=e("../tools/sha1"),s=e("./oauthio_requests"),t.exports=function(e,t,c,u){var h,l,f,p,d,g,v;return r=r(t),i.init(o,t),n.init(i,o),v={},g={},d={execProvidersCb:function(e,t,r){var n,o;if(g[e]){n=g[e],delete g[e];for(o in n)n[o](t,r)}},fetchDescription:function(e){v[e]||(v[e]=!0,c.ajax({url:o.oauthd_api+"/providers/"+e,data:{extend:!0},dataType:"json"}).done(function(t){v[e]=t.data,d.execProvidersCb(e,null,t.data)}).always(function(){"object"!=typeof v[e]&&(delete v[e],d.execProvidersCb(e,new Error("Unable to fetch request description")))}))},getDescription:function(e,t,r){return t=t||{},"object"==typeof v[e]?r(null,v[e]):(v[e]||d.fetchDescription(e),t.wait?(g[e]=g[e]||[],void g[e].push(r)):r(null,{}))}},o.oauthd_base=r.getAbsUrl(o.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0],h=[],l=void 0,(p=function(){var e,r;r=/[\\#&]oauthio=([^&]*)/.exec(t.location.hash),r&&(t.location.hash=t.location.hash.replace(/&?oauthio=[^&]*/,""),l=decodeURIComponent(r[1].replace(/\+/g," ")),e=i.readCookie("oauthio_state"),e&&(h.push(e),i.eraseCookie("oauthio_state")))})(),e.location_operations={reload:function(){return t.location.reload()},getHash:function(){return t.location.hash},setHash:function(e){return t.location.hash=e},changeHref:function(e){return t.location.href=e}},f={request:s(c,o,h,n,d)},function(s){null==s.OAuth&&(s.OAuth={initialize:function(e,t){var r;if(o.key=e,t)for(r in t)o.options[r]=t[r]},setOAuthdURL:function(e){o.oauthd_url=e,o.oauthd_base=r.getAbsUrl(o.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},getVersion:function(){return o.version},create:function(e,t,r){var o,i,a,c;if(!t)return n.tryCache(s.OAuth,e,!0);"object"!=typeof r&&d.fetchDescription(e),i=function(n){return f.request.mkHttp(e,t,r,n)},a=function(n,o){return f.request.mkHttpEndpoint(e,t,r,n,o)},c={};for(o in t)c[o]=t[o];return c.get=i("GET"),c.post=i("POST"),c.put=i("PUT"),c.patch=i("PATCH"),c.del=i("DELETE"),c.me=f.request.mkHttpMe(e,t,r,"GET"),c},popup:function(i,l,p){var d,g,v,y,m,b,w,_,x,k,E;return y=!1,v=function(e){if(e.origin===o.oauthd_base){try{_.close()}catch(t){}return l.data=e.data,f.request.sendCallback(l,d),y=!0}},_=void 0,g=void 0,x=void 0,d=c.Deferred(),l=l||{},o.key?(2===arguments.length&&"function"==typeof l&&(p=l,l={}),n.cacheEnabled(l.cache)&&(b=n.tryCache(s.OAuth,i,l.cache))?(null!=d&&d.resolve(b),p?p(null,b):d.promise()):(l.state||(l.state=a.create_hash(),l.state_type="client"),h.push(l.state),w=o.oauthd_url+"/auth/"+i+"?k="+o.key,w+="&d="+encodeURIComponent(r.getAbsUrl("/")),l&&(w+="&opts="+encodeURIComponent(JSON.stringify(l))),l.wnd_settings?(E=l.wnd_settings,delete l.wnd_settings):E={width:Math.floor(.8*e.outerWidth),height:Math.floor(.5*e.outerHeight)},null==E.height&&(E.height=E.height<350?350:void 0),null==E.width&&(E.width=E.width<800?800:void 0),null==E.left&&(E.left=e.screenX+(e.outerWidth-E.width)/2),null==E.top&&(E.top=e.screenY+(e.outerHeight-E.height)/8),k="width="+E.width+",height="+E.height,k+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",k+=",left="+E.left+",top="+E.top,l={provider:i,cache:l.cache},l.callback=function(r,n){return e.removeEventListener?e.removeEventListener("message",v,!1):e.detachEvent?e.detachEvent("onmessage",v):t.detachEvent&&t.detachEvent("onmessage",v),l.callback=function(){},x&&(clearTimeout(x),x=void 0),p?p(r,n):void 0},e.attachEvent?e.attachEvent("onmessage",v):t.attachEvent?t.attachEvent("onmessage",v):e.addEventListener&&e.addEventListener("message",v,!1),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(e,t){return e.origin=t.url.match(/^.{2,5}:\/\/[^/]+/)[0],null!=d&&d.resolve(),v(e)}),!g&&(-1!==u.userAgent.indexOf("MSIE")||u.appVersion.indexOf("Trident/")>0)&&(g=t.createElement("iframe"),g.src=o.oauthd_url+"/auth/iframe?d="+encodeURIComponent(r.getAbsUrl("/")),g.width=0,g.height=0,g.frameBorder=0,g.style.visibility="hidden",t.body.appendChild(g)),x=setTimeout(function(){null!=d&&d.reject(new Error("Authorization timed out")),l.callback&&"function"==typeof l.callback&&l.callback(new Error("Authorization timed out"));try{_.close()}catch(e){}},12e5),_=e.open(w,"Authorization",k),_?(_.focus(),m=e.setInterval(function(){return null!==_&&!_.closed||(e.clearInterval(m),y||(null!=d&&d.reject(new Error("The popup was closed")),!l.callback||"function"!=typeof l.callback))?void 0:l.callback(new Error("The popup was closed"))},500)):(null!=d&&d.reject(new Error("Could not open a popup")),l.callback&&"function"==typeof l.callback&&l.callback(new Error("Could not open a popup"))),null!=d?d.promise():void 0)):(null!=d&&d.reject(new Error("OAuth object must be initialized")),null==p?d.promise():p(new Error("OAuth object must be initialized")))},redirect:function(t,c,u){var h,l;return 2===arguments.length&&(u=c,c={}),n.cacheEnabled(c.cache)&&(l=n.tryCache(s.OAuth,t,c.cache))?(u=r.getAbsUrl(u)+(-1===u.indexOf("#")?"#":"&")+"oauthio=cache",e.location_operations.changeHref(u),void e.location_operations.reload()):(c.state||(c.state=a.create_hash(),c.state_type="client"),i.createCookie("oauthio_state",c.state),h=encodeURIComponent(r.getAbsUrl(u)),u=o.oauthd_url+"/auth/"+t+"?k="+o.key,u+="&redirect_uri="+h,c&&(u+="&opts="+encodeURIComponent(JSON.stringify(c))),void e.location_operations.changeHref(u))},callback:function(e,t,r){var o,i;if(o=c.Deferred(),1===arguments.length&&"function"==typeof e&&(r=e,e=void 0,t={}),1===arguments.length&&"string"==typeof e&&(t={}),2===arguments.length&&"function"==typeof t&&(r=t,t={}),n.cacheEnabled(t.cache)||"cache"===l){if(i=n.tryCache(s.OAuth,e,t.cache),"cache"===l&&("string"!=typeof e||!e))return null!=o&&o.reject(new Error("You must set a provider when using the cache")),r?r(new Error("You must set a provider when using the cache")):null!=o?o.promise():void 0;if(i){if(!r)return null!=o&&o.resolve(i),null!=o?o.promise():void 0;if(i)return r(null,i)}}return l?(f.request.sendCallback({data:l,provider:e,cache:t.cache,callback:r},o),null!=o?o.promise():void 0):void 0},clearCache:function(e){i.eraseCookie("oauthio_provider_"+e)},http_me:function(e){f.request.http_me&&f.request.http_me(e)},http:function(e){f.request.http&&f.request.http(e)}})}}},{"../config":1,"../tools/cache":5,"../tools/cookies":6,"../tools/sha1":8,"../tools/url":9,"./oauthio_requests":3}],3:[function(e,t){var r,n=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../tools/url")(),t.exports=function(e,t,o,i,s){return{http:function(o){var i,a,c,u,h;c=function(){var o,i,s,a;if(a=h.oauthio.request||{},!a.cors){h.url=encodeURIComponent(h.url),"/"!==h.url[0]&&(h.url="/"+h.url),h.url=t.oauthd_url+"/request/"+h.oauthio.provider+h.url,h.headers=h.headers||{},h.headers.oauthio="k="+t.key,h.oauthio.tokens.oauth_token&&h.oauthio.tokens.oauth_token_secret&&(h.headers.oauthio+="&oauthv=1");for(i in h.oauthio.tokens)h.headers.oauthio+="&"+encodeURIComponent(i)+"="+encodeURIComponent(h.oauthio.tokens[i]);return delete h.oauthio,e.ajax(h)}if(h.oauthio.tokens){if(h.oauthio.tokens.access_token&&(h.oauthio.tokens.token=h.oauthio.tokens.access_token),h.url.match(/^[a-z]{2,16}:\/\//)||("/"!==h.url[0]&&(h.url="/"+h.url),h.url=a.url+h.url),h.url=r.replaceParam(h.url,h.oauthio.tokens,a.parameters),a.query){s=[];for(o in a.query)s.push(encodeURIComponent(o)+"="+encodeURIComponent(r.replaceParam(a.query[o],h.oauthio.tokens,a.parameters)));h.url+=n.call(h.url,"?")>=0?"&"+s:"?"+s}if(a.headers){h.headers=h.headers||{};for(o in a.headers)h.headers[o]=r.replaceParam(a.headers[o],h.oauthio.tokens,a.parameters)}return delete h.oauthio,e.ajax(h)}},h={},u=void 0;for(u in o)h[u]=o[u];return h.oauthio.request&&h.oauthio.request!==!0?c():(a={wait:!!h.oauthio.request},i=e.Deferred(),s.getDescription(h.oauthio.provider,a,function(e,t){return e?i.reject(e):(h.oauthio.request=h.oauthio.tokens.oauth_token&&h.oauthio.tokens.oauth_token_secret?t.oauth1&&t.oauth1.request:t.oauth2&&t.oauth2.request,void i.resolve())}),i.then(c))},http_me:function(r){var n,o,i,a,c;i=function(){var r,n,o,i;r=e.Deferred(),i=c.oauthio.request||{},c.url=t.oauthd_url+"/auth/"+c.oauthio.provider+"/me",c.headers=c.headers||{},c.headers.oauthio="k="+t.key,c.oauthio.tokens.oauth_token&&c.oauthio.tokens.oauth_token_secret&&(c.headers.oauthio+="&oauthv=1");for(n in c.oauthio.tokens)c.headers.oauthio+="&"+encodeURIComponent(n)+"="+encodeURIComponent(c.oauthio.tokens[n]);return delete c.oauthio,o=e.ajax(c),e.when(o).done(function(e){r.resolve(e.data)}).fail(function(e){r.reject(e.responseJSON?e.responseJSON.data:new Error("An error occured while trying to access the resource"))}),r.promise()},c={};for(a in r)c[a]=r[a];return c.oauthio.request&&c.oauthio.request!==!0?i():(o={wait:!!c.oauthio.request},n=e.Deferred(),s.getDescription(c.oauthio.provider,o,function(e,t){return e?n.reject(e):(c.oauthio.request=c.oauthio.tokens.oauth_token&&c.oauthio.tokens.oauth_token_secret?t.oauth1&&t.oauth1.request:t.oauth2&&t.oauth2.request,void n.resolve())}),n.then(i))},mkHttp:function(e,t,r,n){var o;return o=this,function(i,s){var a,c;if(c={},"string"==typeof i){if("object"==typeof s)for(a in s)c[a]=s[a];c.url=i}else if("object"==typeof i)for(a in i)c[a]=i[a];return c.type=c.type||n,c.oauthio={provider:e,tokens:t,request:r},o.http(c)}},mkHttpMe:function(e,t,r,n){var o;return o=this,function(i){var s;return s={},s.type=s.type||n,s.oauthio={provider:e,tokens:t,request:r},s.data=s.data||{},s.data.filter=i?i.join(","):void 0,o.http_me(s)}},sendCallback:function(e,t){var r,n,s,a,c,u,h,l,f,p,d;r=this,n=void 0,a=void 0;try{n=JSON.parse(e.data)}catch(g){return s=g,t.reject(new Error("Error while parsing result")),e.callback(new Error("Error while parsing result"))}if(n&&n.provider){if(e.provider&&n.provider.toLowerCase()!==e.provider.toLowerCase())return a=new Error("Returned provider name does not match asked provider"),t.reject(a),e.callback&&"function"==typeof e.callback?e.callback(a):void 0;if("error"===n.status||"fail"===n.status)return a=new Error(n.message),a.body=n.data,t.reject(a),e.callback&&"function"==typeof e.callback?e.callback(a):void 0;if("success"!==n.status||!n.data)return a=new Error,a.body=n.data,t.reject(a),e.callback&&"function"==typeof e.callback?e.callback(a):void 0;n.state=n.state.replace(/\s+/g,"");for(u in o)d=o[u],o[u]=d.replace(/\s+/g,"");if(!n.state||-1===o.indexOf(n.state))return t.reject(new Error("State is not matching")),e.callback&&"function"==typeof e.callback?e.callback(new Error("State is not matching")):void 0;if(e.provider||(n.data.provider=n.provider),f=n.data,i.cacheEnabled(e.cache)&&f&&i.storeCache(n.provider,f),l=f.request,delete f.request,p=void 0,f.access_token?p={access_token:f.access_token}:f.oauth_token&&f.oauth_token_secret&&(p={oauth_token:f.oauth_token,oauth_token_secret:f.oauth_token_secret}),!l)return t.resolve(f),e.callback&&"function"==typeof e.callback?e.callback(null,f):void 0;if(l.required)for(c in l.required)p[l.required[c]]=f[l.required[c]];return h=function(e){return r.mkHttp(n.provider,p,l,e)},f.get=h("GET"),f.post=h("POST"),f.put=h("PUT"),f.patch=h("PATCH"),f.del=h("DELETE"),f.me=r.mkHttpMe(n.provider,p,l,"GET"),t.resolve(f),e.callback&&"function"==typeof e.callback?e.callback(null,f):void 0}}}}},{"../tools/url":9}],4:[function(e){var t,r;r=e("./tools/jquery-lite.js"),(t=e("./lib/oauth")(window,document,r,navigator))(window||this)},{"./lib/oauth":2,"./tools/jquery-lite.js":7}],5:[function(e,t){t.exports={init:function(e,t){return this.config=t,this.cookies=e},tryCache:function(e,t,r){var n,o,i;if(this.cacheEnabled(r)){if(r=this.cookies.readCookie("oauthio_provider_"+t),!r)return!1;r=decodeURIComponent(r)}if("string"==typeof r)try{r=JSON.parse(r)}catch(s){return n=s,!1}if("object"==typeof r){i={};for(o in r)"request"!==o&&"function"!=typeof r[o]&&(i[o]=r[o]);return e.create(t,i,r.request)}return!1},storeCache:function(e,t){this.cookies.createCookie("oauthio_provider_"+e,encodeURIComponent(JSON.stringify(t)),t.expires_in-10||3600)},cacheEnabled:function(e){return"undefined"==typeof e?this.config.options.cache:e}}},{}],6:[function(e,t){t.exports={init:function(e,t){return this.config=e,this.document=t},createCookie:function(e,t,r){var n;this.eraseCookie(e),n=new Date,n.setTime(n.getTime()+1e3*(r||1200)),r="; expires="+n.toGMTString(),this.document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){var t,r,n,o;for(o=e+"=",r=this.document.cookie.split(";"),n=0;n<r.length;){for(t=r[n];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return t.substring(o.length,t.length);n++}return null},eraseCookie:function(e){var t;t=new Date,t.setTime(t.getTime()-864e5),this.document.cookie=e+"=; expires="+t.toGMTString()+"; path=/"}}},{}],7:[function(e,t){!function(e,r){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?r(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(e)}("undefined"!=typeof window?window:this,function(e){function t(e){var t=e.length,r=S.type(e);return"function"===r||S.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e){var t=N[e]={};return S.each(e.match(B)||[],function(e,r){t[r]=!0}),t}function n(){E.removeEventListener("DOMContentLoaded",n,!1),e.removeEventListener("load",n,!1),S.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=S.expando+Math.random()}function i(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(M,"-$1").toLowerCase(),r=e.getAttribute(n),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:H.test(r)?S.parseJSON(r):r}catch(o){}data_user.set(e,t,r)}else r=void 0;return r}function s(){return!0}function a(){return!1}function c(){try{return E.activeElement}catch(e){}}function u(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,o=0,i=t.toLowerCase().match(B)||[];if(S.isFunction(r))for(;n=i[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function h(e,t,r,n){function o(a){var c;return i[a]=!0,S.each(e[a]||[],function(e,a){var u=a(t,r,n);return"string"!=typeof u||s||i[u]?s?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}var i={},s=e===it;return o(t.dataTypes[0])||!i["*"]&&o("*")}function l(e,t){var r,n,o=S.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&S.extend(!0,e,n),e}function f(e,t,r){for(var n,o,i,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){c.unshift(o);break}if(c[0]in r)i=c[0];else{for(o in r){if(!c[0]||e.converters[o+" "+c[0]]){i=o;break}s||(s=o)}i=i||s}return i?(i!==c[0]&&c.unshift(i),r[i]):void 0}function p(e,t,r,n){var o,i,s,a,c,u={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(i=h.shift();i;)if(e.responseFields[i]&&(r[e.responseFields[i]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=h.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(s=u[c+" "+i]||u["* "+i],!s)for(o in u)if(a=o.split(" "),a[1]===i&&(s=u[c+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[o]:u[o]!==!0&&(i=a[0],h.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(l){return{state:"parsererror",error:s?l:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}function d(e,t,r,n){var o;if(S.isArray(t))S.each(t,function(t,o){r||ut.test(e)?n(e,o):d(e+"["+("object"==typeof o?t:"")+"]",o,r,n)});else if(r||"object"!==S.type(t))n(e,t);else for(o in t)d(e+"["+o+"]",t[o],r,n)}var g=[],v=g.slice,y=g.concat,m=g.push,b=g.indexOf,w={},_=w.toString,x=w.hasOwnProperty,k={},E=e.document,A="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",S=function(e,t){return new S.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,j=/^-ms-/,C=/-([\da-z])/gi,R=function(e,t){return t.toUpperCase()};S.fn=S.prototype={jquery:A,constructor:S,selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:v.call(this)},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return S.each(this,e,t)},map:function(e){return this.pushStack(S.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:m,sort:g.sort,splice:g.splice},S.extend=S.fn.extend=function(){var e,t,r,n,o,i,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||S.isFunction(s)||(s={}),a===c&&(s=this,a--);c>a;a++)if(null!=(e=arguments[a]))for(t in e)r=s[t],n=e[t],s!==n&&(u&&n&&(S.isPlainObject(n)||(o=S.isArray(n)))?(o?(o=!1,i=r&&S.isArray(r)?r:[]):i=r&&S.isPlainObject(r)?r:{},s[t]=S.extend(u,i,n)):void 0!==n&&(s[t]=n));return s},S.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===S.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!S.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==S.type(e)||e.nodeType||S.isWindow(e)?!1:e.constructor&&!x.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?w[_.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;e=S.trim(e),e&&(1===e.indexOf("use strict")?(t=E.createElement("script"),t.text=e,E.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(j,"ms-").replace(C,R)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,r,n){var o,i=0,s=e.length,a=t(e);if(n){if(a)for(;s>i&&(o=r.apply(e[i],n),o!==!1);i++);else for(i in e)if(o=r.apply(e[i],n),o===!1)break}else if(a)for(;s>i&&(o=r.call(e[i],i,e[i]),o!==!1);i++);else for(i in e)if(o=r.call(e[i],i,e[i]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,r){var n=r||[];return null!=e&&(t(Object(e))?S.merge(n,"string"==typeof e?[e]:e):m.call(n,e)),n},inArray:function(e,t,r){return null==t?-1:b.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,o=e.length;r>n;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,r){for(var n,o=[],i=0,s=e.length,a=!r;s>i;i++)n=!t(e[i],i),n!==a&&o.push(e[i]);return o},map:function(e,r,n){var o,i=0,s=e.length,a=t(e),c=[];if(a)for(;s>i;i++)o=r(e[i],i,n),null!=o&&c.push(o);else for(i in e)o=r(e[i],i,n),null!=o&&c.push(o);return y.apply([],c)},guid:1,proxy:function(e,t){var r,n,o;return"string"==typeof t&&(r=e[t],t=e,e=r),S.isFunction(e)?(n=v.call(arguments,2),o=function(){return e.apply(t||this,n.concat(v.call(arguments)))},o.guid=e.guid=e.guid||S.guid++,o):void 0},now:Date.now,support:k}),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){w["[object "+t+"]"]=t.toLowerCase()});var L,O=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,U=S.fn.init=function(e,t){var r,n;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||L).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),O.test(r[1])&&S.isPlainObject(t))for(r in t)S.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return n=E.getElementById(r[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=E,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):S.isFunction(e)?"undefined"!=typeof L.ready?L.ready(e):e(S):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),S.makeArray(e,this))};U.prototype=S.fn,L=S(E);var B=/\S+/g,N={};S.Callbacks=function(e){e="string"==typeof e?N[e]||r(e):S.extend({},e);var t,n,o,i,s,a,c=[],u=!e.once&&[],h=function(r){for(t=e.memory&&r,n=!0,a=i||0,i=0,s=c.length,o=!0;c&&s>a;a++)if(c[a].apply(r[0],r[1])===!1&&e.stopOnFalse){t=!1;break}o=!1,c&&(u?u.length&&h(u.shift()):t?c=[]:l.disable())},l={add:function(){if(c){var r=c.length;!function n(t){S.each(t,function(t,r){var o=S.type(r);"function"===o?e.unique&&l.has(r)||c.push(r):r&&r.length&&"string"!==o&&n(r)})}(arguments),o?s=c.length:t&&(i=r,h(t))}return this},remove:function(){return c&&S.each(arguments,function(e,t){for(var r;(r=S.inArray(t,c,r))>-1;)c.splice(r,1),o&&(s>=r&&s--,a>=r&&a--)}),this},has:function(e){return e?S.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=t=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,t||l.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],o?u.push(t):h(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},S.extend({Deferred:function(e){var t=[["resolve","done",S.Callbacks("once memory"),"resolved"],["reject","fail",S.Callbacks("once memory"),"rejected"],["notify","progress",S.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return S.Deferred(function(r){S.each(t,function(t,i){var s=S.isFunction(e[t])&&e[t];o[i[1]](function(){var e=s&&s.apply(this,arguments);e&&S.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[i[0]+"With"](this===n?r.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?S.extend(e,n):n}},o={};return n.pipe=n.then,S.each(t,function(e,i){var s=i[2],a=i[3];n[i[1]]=s.add,a&&s.add(function(){r=a},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?n:this,arguments),this},o[i[0]+"With"]=s.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,r,n,o=0,i=v.call(arguments),s=i.length,a=1!==s||e&&S.isFunction(e.promise)?s:0,c=1===a?e:S.Deferred(),u=function(e,r,n){return function(o){r[e]=this,n[e]=arguments.length>1?v.call(arguments):o,n===t?c.notifyWith(r,n):--a||c.resolveWith(r,n)}};if(s>1)for(t=new Array(s),r=new Array(s),n=new Array(s);s>o;o++)i[o]&&S.isFunction(i[o].promise)?i[o].promise().done(u(o,n,i)).fail(c.reject).progress(u(o,r,t)):--a;return a||c.resolveWith(n,i),c.promise()}});var D;S.fn.ready=function(e){return S.ready.promise().done(e),this},S.extend({isReady:!1,readyWait:1,holdReady:function(e){e?S.readyWait++:S.ready(!0)},ready:function(e){(e===!0?--S.readyWait:S.isReady)||(S.isReady=!0,e!==!0&&--S.readyWait>0||(D.resolveWith(E,[S]),S.fn.triggerHandler&&(S(E).triggerHandler("ready"),S(E).off("ready"))))}}),S.ready.promise=function(t){return D||(D=S.Deferred(),"complete"===E.readyState?setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1))),D.promise(t)},S.ready.promise();var I=S.access=function(e,t,r,n,o,i,s){var a=0,c=e.length,u=null==r;if("object"===S.type(r)){o=!0;for(a in r)S.access(e,t,a,r[a],!0,i,s)}else if(void 0!==n&&(o=!0,S.isFunction(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(S(e),r)})),t))for(;c>a;a++)t(e[a],r,s?n:n.call(e[a],a,t(e[a],r)));return o?e:u?t.call(e):c?t(e[0],r):i};S.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},o.uid=1,o.accepts=S.acceptData,o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=o.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(n){t[this.expando]=r,S.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var n,o=this.key(e),i=this.cache[o];if("string"==typeof t)i[t]=r;else if(S.isEmptyObject(i))S.extend(this.cache[o],t);else for(n in t)i[n]=t[n];return i},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var n;return void 0===t||t&&"string"==typeof t&&void 0===r?(n=this.get(e,t),void 0!==n?n:this.get(e,S.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n,o,i=this.key(e),s=this.cache[i];if(void 0===t)this.cache[i]={};else{S.isArray(t)?n=t.concat(t.map(S.camelCase)):(o=S.camelCase(t),t in s?n=[t,o]:(n=o,n=n in s?[n]:n.match(B)||[])),r=n.length;for(;r--;)delete s[n[r]]}},hasData:function(e){return!S.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var q=new o,H=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,M=/([A-Z])/g;S.extend({hasData:function(e){return data_user.hasData(e)||q.hasData(e)},data:function(e,t,r){return data_user.access(e,t,r)},removeData:function(e,t){data_user.remove(e,t)},_data:function(e,t,r){return q.access(e,t,r)},_removeData:function(e,t){q.remove(e,t)}}),S.fn.extend({data:function(e,t){var r,n,o,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(o=data_user.get(s),1===s.nodeType&&!q.get(s,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(n=a[r].name,0===n.indexOf("data-")&&(n=S.camelCase(n.slice(5)),i(s,n,o[n])));q.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){data_user.set(this,e)}):I(this,function(t){var r,n=S.camelCase(e);if(s&&void 0===t){if(r=data_user.get(s,e),void 0!==r)return r;if(r=data_user.get(s,n),void 0!==r)return r;if(r=i(s,n,void 0),void 0!==r)return r}else this.each(function(){var r=data_user.get(this,n);
data_user.set(this,n,t),-1!==e.indexOf("-")&&void 0!==r&&data_user.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){data_user.remove(this,e)})}});var F=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,"undefined"),z=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,V=/^([^.]*)(?:\.(.+)|)$/;S.event={global:{},add:function(e,t,r,n,o){var i,s,a,c,u,h,l,f,p,d,g,v=q.get(e);if(v)for(r.handler&&(i=r,r=i.handler,o=i.selector),r.guid||(r.guid=S.guid++),(c=v.events)||(c=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof S!==F&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(B)||[""],u=t.length;u--;)a=V.exec(t[u])||[],p=g=a[1],d=(a[2]||"").split(".").sort(),p&&(l=S.event.special[p]||{},p=(o?l.delegateType:l.bindType)||p,l=S.event.special[p]||{},h=S.extend({type:p,origType:g,data:n,handler:r,guid:r.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:d.join(".")},i),(f=c[p])||(f=c[p]=[],f.delegateCount=0,l.setup&&l.setup.call(e,n,d,s)!==!1||e.addEventListener&&e.addEventListener(p,s,!1)),l.add&&(l.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),o?f.splice(f.delegateCount++,0,h):f.push(h),S.event.global[p]=!0)},remove:function(e,t,r,n,o){var i,s,a,c,u,h,l,f,p,d,g,v=q.hasData(e)&&q.get(e);if(v&&(c=v.events)){for(t=(t||"").match(B)||[""],u=t.length;u--;)if(a=V.exec(t[u])||[],p=g=a[1],d=(a[2]||"").split(".").sort(),p){for(l=S.event.special[p]||{},p=(n?l.delegateType:l.bindType)||p,f=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=f.length;i--;)h=f[i],!o&&g!==h.origType||r&&r.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(f.splice(i,1),h.selector&&f.delegateCount--,l.remove&&l.remove.call(e,h));s&&!f.length&&(l.teardown&&l.teardown.call(e,d,v.handle)!==!1||S.removeEvent(e,p,v.handle),delete c[p])}else for(p in c)S.event.remove(e,p+t[u],r,n,!0);S.isEmptyObject(c)&&(delete v.handle,q.remove(e,"events"))}},trigger:function(t,r,n,o){var i,s,a,c,u,h,l,f=[n||E],p=x.call(t,"type")?t.type:t,d=x.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Y.test(p+S.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[S.expando]?t:new S.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),r=null==r?[t]:S.makeArray(r,[t]),l=S.event.special[p]||{},o||!l.trigger||l.trigger.apply(n,r)!==!1)){if(!o&&!l.noBubble&&!S.isWindow(n)){for(c=l.delegateType||p,Y.test(c+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(n.ownerDocument||E)&&f.push(a.defaultView||a.parentWindow||e)}for(i=0;(s=f[i++])&&!t.isPropagationStopped();)t.type=i>1?c:l.bindType||p,h=(q.get(s,"events")||{})[t.type]&&q.get(s,"handle"),h&&h.apply(s,r),h=u&&s[u],h&&h.apply&&S.acceptData(s)&&(t.result=h.apply(s,r),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||l._default&&l._default.apply(f.pop(),r)!==!1||!S.acceptData(n)||u&&S.isFunction(n[p])&&!S.isWindow(n)&&(a=n[u],a&&(n[u]=null),S.event.triggered=p,n[p](),S.event.triggered=void 0,a&&(n[u]=a)),t.result}},dispatch:function(e){e=S.event.fix(e);var t,r,n,o,i,s=[],a=v.call(arguments),c=(q.get(this,"events")||{})[e.type]||[],u=S.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=S.event.handlers.call(this,e,c),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((S.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,n,o,i,s=[],a=t.delegateCount,c=e.target;if(a&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(n=[],r=0;a>r;r++)i=t[r],o=i.selector+" ",void 0===n[o]&&(n[o]=i.needsContext?S(o,this).index(c)>=0:S.find(o,this,null,[c]).length),n[o]&&n.push(i);n.length&&s.push({elem:c,handlers:n})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,o,i=t.button;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||E,n=r.documentElement,o=r.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[S.expando])return e;var t,r,n,o=e.type,i=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=W.test(o)?this.mouseHooks:z.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new S.Event(i),t=n.length;t--;)r=n[t],e[r]=i[r];return e.target||(e.target=E),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,i):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&S.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return S.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,n){var o=S.extend(new S.Event,r,{type:e,isSimulated:!0,originalEvent:{}});n?S.event.trigger(o,null,t):S.event.dispatch.call(t,o),o.isDefaultPrevented()&&r.preventDefault()}},S.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},S.Event=function(e,t){return this instanceof S.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?s:a):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||S.now(),void(this[S.expando]=!0)):new S.Event(e,t)},S.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=s,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,o=e.relatedTarget,i=e.handleObj;return(!o||o!==n&&!S.contains(n,o))&&(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||S.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){S.event.simulate(t,e.target,S.event.fix(e),!0)};S.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=q.access(n,t);o||n.addEventListener(e,r,!0),q.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=q.access(n,t)-1;o?q.access(n,t,o):(n.removeEventListener(e,r,!0),q.remove(n,t))}}}),S.fn.extend({on:function(e,t,r,n,o){var i,s;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(s in e)this.on(s,t,r,e[s],o);return this}if(null==r&&null==n?(n=t,r=t=void 0):null==n&&("string"==typeof t?(n=r,r=void 0):(n=r,r=t,t=void 0)),n===!1)n=a;else if(!n)return this;return 1===o&&(i=n,n=function(e){return S().off(e),i.apply(this,arguments)},n.guid=i.guid||(i.guid=S.guid++)),this.each(function(){S.event.add(this,e,n,r,t)})},one:function(e,t,r,n){return this.on(e,t,r,n,1)},off:function(e,t,r){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=a),this.each(function(){S.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?S.event.trigger(e,t,r,!0):void 0}});var J=S.now(),X=/\?/;S.parseJSON=function(e){return JSON.parse(e+"")},S.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&S.error("Invalid XML: "+e),t};var $,G,K=/#.*$/,Z=/([?&])_=[^&]*/,Q=/^(.*?):[ \t]*([^\r\n]*)$/gm,et=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,tt=/^(?:GET|HEAD)$/,rt=/^\/\//,nt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ot={},it={},st="*/".concat("*");try{G=location.href}catch(at){G=E.createElement("a"),G.href="",G=G.href}$=nt.exec(G.toLowerCase())||[],S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:G,type:"GET",isLocal:et.test($[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":st,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":S.parseJSON,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?l(l(e,S.ajaxSettings),t):l(S.ajaxSettings,e)},ajaxPrefilter:u(ot),ajaxTransport:u(it),ajax:function(e,t){function r(e,t,r,s){var c,h,l,w,_,k=t;2!==x&&(x=2,a&&clearTimeout(a),n=void 0,i=s||"",E.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=f(d,E,r)),w=p(d,w,E,c),c?(d.ifModified&&(_=E.getResponseHeader("Last-Modified"),_&&(S.lastModified[o]=_),_=E.getResponseHeader("etag"),_&&(S.etag[o]=_)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=w.state,h=w.data,l=w.error,c=!l)):(l=k,(e||!k)&&(k="error",0>e&&(e=0))),E.status=e,E.statusText=(t||k)+"",c?y.resolveWith(g,[h,k,E]):y.rejectWith(g,[E,k,l]),E.statusCode(b),b=void 0,u&&v.trigger(c?"ajaxSuccess":"ajaxError",[E,d,c?h:l]),m.fireWith(g,[E,k]),u&&(v.trigger("ajaxComplete",[E,d]),--S.active||S.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,i,s,a,c,u,l,d=S.ajaxSetup({},t),g=d.context||d,v=d.context&&(g.nodeType||g.jquery)?S(g):S.event,y=S.Deferred(),m=S.Callbacks("once memory"),b=d.statusCode||{},w={},_={},x=0,k="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=Q.exec(i);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?i:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return x||(e=_[r]=_[r]||e,w[e]=t),this},overrideMimeType:function(e){return x||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)b[t]=[b[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||k;return n&&n.abort(t),r(0,t),this}};if(y.promise(E).complete=m.add,E.success=E.done,E.error=E.fail,d.url=((e||d.url||G)+"").replace(K,"").replace(rt,$[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=S.trim(d.dataType||"*").toLowerCase().match(B)||[""],null==d.crossDomain&&(c=nt.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===$[1]&&c[2]===$[2]&&(c[3]||("http:"===c[1]?"80":"443"))===($[3]||("http:"===$[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=S.param(d.data,d.traditional)),h(ot,d,t,E),2===x)return E;u=d.global,u&&0===S.active++&&S.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!tt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(X.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Z.test(o)?o.replace(Z,"$1_="+J++):o+(X.test(o)?"&":"?")+"_="+J++)),d.ifModified&&(S.lastModified[o]&&E.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&E.setRequestHeader("If-None-Match",S.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+st+"; q=0.01":""):d.accepts["*"]);for(l in d.headers)E.setRequestHeader(l,d.headers[l]);if(d.beforeSend&&(d.beforeSend.call(g,E,d)===!1||2===x))return E.abort();k="abort";for(l in{success:1,error:1,complete:1})E[l](d[l]);if(n=h(it,d,t,E)){E.readyState=1,u&&v.trigger("ajaxSend",[E,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){E.abort("timeout")},d.timeout));try{x=1,n.send(w,r)}catch(A){if(!(2>x))throw A;r(-1,A)}}else r(-1,"No Transport");return E},getJSON:function(e,t,r){return S.get(e,t,r,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,t){S[t]=function(e,r,n,o){return S.isFunction(r)&&(o=o||n,n=r,r=void 0),S.ajax({url:e,type:t,dataType:o,data:r,success:n})}}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}});var ct=/%20/g,ut=/\[\]$/,ht=/\r?\n/g,lt=/^(?:submit|button|image|reset|file)$/i,ft=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){var r,n=[],o=function(e,t){t=S.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=S.ajaxSettings&&S.ajaxSettings.traditional),S.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){o(this.name,this.value)});else for(r in e)d(r,e[r],t,o);return n.join("&").replace(ct,"+")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&ft.test(this.nodeName)&&!lt.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var r=S(this).val();return null==r?null:S.isArray(r)?S.map(r,function(e){return{name:t.name,value:e.replace(ht,"\r\n")}}):{name:t.name,value:r.replace(ht,"\r\n")}}).get()}}),S.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var pt=0,dt={},gt={0:200,1223:204},vt=S.ajaxSettings.xhr();e.ActiveXObject&&S(e).on("unload",function(){for(var e in dt)dt[e]()}),k.cors=!!vt&&"withCredentials"in vt,k.ajax=vt=!!vt,S.ajaxTransport(function(e){var t;return k.cors||vt&&!e.crossDomain?{send:function(r,n){var o,i=e.xhr(),s=++pt;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)i[o]=e.xhrFields[o];e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)i.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(delete dt[s],t=i.onload=i.onerror=null,"abort"===e?i.abort():"error"===e?n(i.status,i.statusText):n(gt[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=t(),i.onerror=t("error"),t=dt[s]=t("abort");try{i.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(n,o){t=S("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&o("error"===e.type?404:200,e.type)}),E.head.appendChild(t[0])},abort:function(){r&&r()}}}});var yt=[],mt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=yt.pop()||S.expando+"_"+J++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(t,r,n){var o,i,s,a=t.jsonp!==!1&&(mt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&mt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=S.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(mt,"$1"+o):t.jsonp!==!1&&(t.url+=(X.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||S.error(o+" was not called"),s[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){s=arguments},n.always(function(){e[o]=i,t[o]&&(t.jsonpCallback=r.jsonpCallback,yt.push(o)),s&&S.isFunction(i)&&i(s[0]),s=i=void 0}),"script"):void 0}),S.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||E;var n=O.exec(e),o=!r&&[];return n?[t.createElement(n[1])]:(n=S.buildFragment([e],t,o),o&&o.length&&S(o).remove(),S.merge([],n.childNodes))};var bt=S.fn.load;return S.fn.load=function(e,t,r){if("string"!=typeof e&&bt)return bt.apply(this,arguments);var n,o,i,s=this,a=e.indexOf(" ");return a>=0&&(n=S.trim(e.slice(a)),e=e.slice(0,a)),S.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&S.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,s.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)}).complete(r&&function(e,t){s.each(r,i||[e.responseText,t,e])}),this},S.noConflict=function(){},S})},{}],8:[function(e,t){var r,n;n=0,r="",t.exports={hex_sha1:function(e){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(e)))},b64_sha1:function(e){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(e)))},any_sha1:function(e,t){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(e)),t)},hex_hmac_sha1:function(e,t){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},b64_hmac_sha1:function(e,t){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},any_hmac_sha1:function(e,t,r){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},sha1_vm_test:function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"===thishex_sha1("abc").toLowerCase()},rstr_sha1:function(e){return this.binb2rstr(this.binb_sha1(this.rstr2binb(e),8*e.length))},rstr_hmac_sha1:function(e,t){var r,n,o,i,s;for(r=this.rstr2binb(e),r.length>16&&(r=this.binb_sha1(r,8*e.length)),i=Array(16),s=Array(16),o=0;16>o;)i[o]=909522486^r[o],s[o]=1549556828^r[o],o++;return n=this.binb_sha1(i.concat(this.rstr2binb(t)),512+8*t.length),this.binb2rstr(this.binb_sha1(s.concat(n),672))},rstr2hex:function(e){var t,r,o,i,s;try{}catch(a){t=a,n=0}for(r=n?"0123456789ABCDEF":"0123456789abcdef",i="",s=void 0,o=0;o<e.length;)s=e.charCodeAt(o),i+=r.charAt(s>>>4&15)+r.charAt(15&s),o++;return i},rstr2b64:function(e){var t,n,o,i,s,a,c;try{}catch(u){t=u,r=""}for(a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",i=e.length,n=0;i>n;){for(c=e.charCodeAt(n)<<16|(i>n+1?e.charCodeAt(n+1)<<8:0)|(i>n+2?e.charCodeAt(n+2):0),o=0;4>o;)s+=8*n+6*o>8*e.length?r:a.charAt(c>>>6*(3-o)&63),o++;n+=3}return s},rstr2any:function(e,t){var r,n,o,i,s,a,c,u,h;for(n=t.length,u=Array(),i=void 0,a=void 0,h=void 0,c=void 0,r=Array(Math.ceil(e.length/2)),i=0;i<r.length;)r[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1),i++;for(;r.length>0;){for(c=Array(),h=0,i=0;i<r.length;)h=(h<<16)+r[i],a=Math.floor(h/n),h-=a*n,(c.length>0||a>0)&&(c[c.length]=a),i++;u[u.length]=h,r=c}for(s="",i=u.length-1;i>=0;)s+=t.charAt(u[i]),i--;for(o=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),i=s.length;o>i;)s=t[0]+s,i++;return s},str2rstr_utf8:function(e){var t,r,n,o;for(r="",t=-1,n=void 0,o=void 0;++t<e.length;)n=e.charCodeAt(t),o=t+1<e.length?e.charCodeAt(t+1):0,n>=55296&&56319>=n&&o>=56320&&57343>=o&&(n=65536+((1023&n)<<10)+(1023&o),t++),127>=n?r+=String.fromCharCode(n):2047>=n?r+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r},str2rstr_utf16le:function(e){var t,r;for(r="",t=0;t<e.length;)r+=String.fromCharCode(255&e.charCodeAt(t),e.charCodeAt(t)>>>8&255),t++;return r},str2rstr_utf16be:function(e){var t,r;for(r="",t=0;t<e.length;)r+=String.fromCharCode(e.charCodeAt(t)>>>8&255,255&e.charCodeAt(t)),t++;return r},rstr2binb:function(e){var t,r;for(r=Array(e.length>>2),t=0;t<r.length;)r[t]=0,t++;for(t=0;t<8*e.length;)r[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32,t+=8;return r},binb2rstr:function(e){var t,r;for(r="",t=0;t<32*e.length;)r+=String.fromCharCode(e[t>>5]>>>24-t%32&255),t+=8;return r},binb_sha1:function(e,t){var r,n,o,i,s,a,c,u,h,l,f,p,d,g;for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,g=Array(80),r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=-1009589776,a=0;a<e.length;){for(u=r,h=n,l=o,f=i,p=s,c=0;80>c;)g[c]=16>c?e[a+c]:this.bit_rol(g[c-3]^g[c-8]^g[c-14]^g[c-16],1),d=this.safe_add(this.safe_add(this.bit_rol(r,5),this.sha1_ft(c,n,o,i)),this.safe_add(this.safe_add(s,g[c]),this.sha1_kt(c))),s=i,i=o,o=this.bit_rol(n,30),n=r,r=d,c++;r=this.safe_add(r,u),n=this.safe_add(n,h),o=this.safe_add(o,l),i=this.safe_add(i,f),s=this.safe_add(s,p),a+=16}return Array(r,n,o,i,s)},sha1_ft:function(e,t,r,n){return 20>e?t&r|~t&n:40>e?t^r^n:60>e?t&r|t&n|r&n:t^r^n},sha1_kt:function(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514},safe_add:function(e,t){var r,n;return r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16),n<<16|65535&r},bit_rol:function(e,t){return e<<t|e>>>32-t},create_hash:function(){var e;return e=this.b64_sha1((new Date).getTime()+":"+Math.floor(9999999*Math.random())),e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],9:[function(e,t){t.exports=function(e){return{getAbsUrl:function(t){var r;return t.match(/^.{2,5}:\/\//)?t:"/"===t[0]?e.location.protocol+"//"+e.location.host+t:(r=e.location.protocol+"//"+e.location.host+e.location.pathname,"/"!==r[r.length-1]&&"#"!==t[0]?r+"/"+t:r+t)},replaceParam:function(e,t,r){return e=e.replace(/\{\{(.*?)\}\}/g,function(e,r){return t[r]||""}),r&&(e=e.replace(/\{(.*?)\}/g,function(e,t){return r[t]||""})),e}}}},{}]},{},[4])},{}],36:[function(e,t){t.exports=e("./lib/")},{"./lib/":37}],37:[function(e,t,r){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,n=o(e),i=n.source,u=n.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",i),r=s(i,t)):(c[u]||(a("new io instance for %s",i),c[u]=s(i,t)),r=c[u]),r.socket(n.path)}var o=e("./url"),i=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=r=n;var c=r.managers={};r.protocol=i.protocol,r.connect=n,r.Manager=e("./manager"),r.Socket=e("./socket")},{"./manager":38,"./socket":40,"./url":41,debug:44,"socket.io-parser":74}],38:[function(e,t){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,void this.open()):new r(e,t)}var n=(e("./url"),e("engine.io-client")),o=e("./socket"),i=e("component-emitter"),s=e("socket.io-parser"),a=e("./on"),c=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager"));t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},i(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||(this.openReconnect=!0,this.reconnect())},r.prototype.open=r.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening";var o=a(t,"open",function(){r.onopen(),e&&e()}),i=a(t,"error",function(t){if(u("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var c=setTimeout(function(){u("connect attempt timed out after %d",s),o.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(i),this},r.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose")))},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var r=this;t.on("connect",function(){r.connected++})}return t},r.prototype.destroy=function(){--this.connected||this.close()},r.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var r=0;r<e.length;r++)t.engine.write(e[r]);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},r.prototype.onclose=function(e){u("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)u("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){u("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},r.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":39,"./socket":40,"./url":41,"component-bind":42,"component-emitter":43,debug:44,"engine.io-client":45,"object-component":71,"socket.io-parser":74}],39:[function(e,t){function r(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}t.exports=r},{}],40:[function(e,t,r){function n(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}{var o=e("socket.io-parser"),i=e("component-emitter"),s=e("to-array"),a=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:socket"),h=e("has-binary-data");e("indexof")}t.exports=r=n;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){var e=this.io;this.subs=[a(e,"open",c(this,"onopen")),a(e,"packet",c(this,"onpacket")),a(e,"close",c(this,"onclose"))]},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(l.hasOwnProperty(e))return f.apply(this,arguments),this;var t=s(arguments),r=o.EVENT;h(t)&&(r=o.BINARY_EVENT);var n={type:r,data:t};return"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},n.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(e);break;case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:this.onack(e);break;case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);u("sending ack %j",n);var i=h(n)?o.BINARY_ACK:o.ACK;t.packet({type:i,id:e,data:n})}}},n.prototype.onack=function(e){u("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected?(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this
}},{"./on":39,"component-bind":42,"component-emitter":43,debug:44,"has-binary-data":68,indexof:70,"socket.io-parser":74,"to-array":78}],41:[function(e,t){(function(r){function n(e,t){var n=e,t=t||r.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&"undefined"!=typeof t&&(e=t.hostname+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=o(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(t&&t.port==n.port?"":":"+n.port),n}var o=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:44,parseuri:72}],42:[function(e,t){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],43:[function(e,t){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],44:[function(e,t){function r(e){return r.enabled(e)?function(t){t=n(t);var o=new Date,i=o-(r[e]||o);r[e]=o,t=e+" "+t+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function n(e){return e instanceof Error?e.stack||e.message:e}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),o=n.length,i=0;o>i;i++)e=n[i].replace("*",".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,r=6e4,n=60*r;return e>=n?(e/n).toFixed(1)+"h":e>=r?(e/r).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(o){}},{}],45:[function(e,t){t.exports=e("./lib/")},{"./lib/":46}],46:[function(e,t){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":47,"engine.io-parser":56}],47:[function(e,t){(function(r){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=h(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.host){var o=t.host.split(":");t.hostname=o.shift(),o.length&&(t.port=o.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.forceBase64=!!t.forceBase64,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var i=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),c=e("indexof"),u=e("engine.io-parser"),h=e("parseuri"),l=e("parsejson"),f=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=u.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=o(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return r},n.prototype.open=function(){var e;e=this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket")?"websocket":this.transports[0],this.readyState="opening";var e=this.createTransport(e);e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;l=l||t}l||(a('probe transport "%s" opened',e),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(t){if(!l)if("pong"==t.type&&"probe"==t.data)a('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",h),n.priorWebsocketSuccess="websocket"==h.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){l||"closed"!=f.readyState&&"closing"!=f.readyState&&(a("changing transport and sending upgrade packet"),u(),f.setTransport(h),h.send([{type:"upgrade"}]),f.emit("upgrade",h),h=null,f.upgrading=!1,f.flush())});else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=h.name,f.emit("upgradeError",r)}}))}function r(){l||(l=!0,u(),h.close(),h=null)}function o(t){var n=new Error("probe error: "+t);n.transport=h.name,r(),a('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(e){h&&e.name!=h.name&&(a('"%s" works - aborting "%s"',e.name,h.name),r())}function u(){h.removeListener("open",t),h.removeListener("error",o),h.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',e);var h=this.createTransport(e,{probe:1}),l=!1,f=this;n.priorWebsocketSuccess=!1,h.once("open",t),h.once("error",o),h.once("close",i),this.once("close",s),this.once("upgrading",c),h.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(l(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,r){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(r),this.flush()},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),a("socket closing - telling transport to close"),this.transport.close()),this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){a('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;n>r;r++)~c(this.transports,e[r])&&t.push(e[r]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":48,"./transports":49,"component-emitter":43,debug:44,"engine.io-parser":56,indexof:70,parsejson:65,parseqs:66,parseuri:72}],48:[function(e,t){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket}var n=e("engine.io-parser"),o=e("component-emitter");t.exports=r,o(r.prototype),r.timestamps=0,r.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){try{var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)}catch(r){r.data=e,this.onError("parser decode error",r)}},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":43,"engine.io-parser":56}],49:[function(e,t,r){(function(t){function n(e){var r,n=!1;if(t.location){var a="https:"==location.protocol,c=location.port;c||(c=a?443:80),n=e.hostname!=location.hostname||c!=e.port}return e.xdomain=n,r=new o(e),"open"in r&&!e.forceJSONP?new i(e):new s(e)}var o=e("xmlhttprequest"),i=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");r.polling=n,r.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":50,"./polling-xhr":51,"./websocket":53,xmlhttprequest:54}],50:[function(e,t){(function(r){function n(){}function o(e){i.call(this,e),this.query=this.query||{},a||(r.___eio||(r.___eio=[]),a=r.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)})}var i=e("./polling"),s=e("component-inherit");t.exports=o;var a,c=/\n/g,u=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":52,"component-inherit":55}],51:[function(e,t){(function(r){function n(){}function o(e){if(c.call(this,e),r.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=r.location.hostname||n!=e.port}}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.create(e.isBinary,e.supportsBinary)}function s(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var a=e("xmlhttprequest"),c=e("./polling"),u=e("component-emitter"),h=e("component-inherit"),l=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,h(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,new i(e)},o.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},o.prototype.doPoll=function(){l("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(i.prototype),i.prototype.create=function(e,t){var n=this.xhr=new a({agent:this.agent,xdomain:this.xd}),o=this;try{if(l("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async),t&&(n.responseType="arraybuffer"),"POST"==this.method)try{e?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}"withCredentials"in n&&(n.withCredentials=!0),n.onreadystatechange=function(){var e;try{if(4!=n.readyState)return;if(200==n.status||1223==n.status){var r=n.getResponseHeader("Content-Type");e="application/octet-stream"===r?n.response:t?"ok":n.responseText}else setTimeout(function(){o.onError(n.status)},0)}catch(i){o.onError(i)}null!=e&&o.onData(e)},l("xhr data %s",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){o.onError(s)},0)}r.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup()},i.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(e){}r.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.abort=function(){this.cleanup()},r.document&&(i.requestsCount=0,i.requests={},r.attachEvent?r.attachEvent("onunload",s):r.addEventListener&&r.addEventListener("beforeunload",s))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":52,"component-emitter":43,"component-inherit":55,debug:44,xmlhttprequest:54}],52:[function(e,t){function r(e){var t=e&&e.forceBase64;(!c||t)&&(this.supportsBinary=!1),n.call(this,e)}var n=e("../transport"),o=e("parseqs"),i=e("engine.io-parser"),s=e("component-inherit"),a=e("debug")("engine.io-client:polling");t.exports=r;var c=function(){var t=e("xmlhttprequest"),r=new t({agent:this.agent,xdomain:!1});return null!=r.responseType}();s(r,n),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){a("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(a("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){a("pre-pause polling complete"),--n||t()})),this.writable||(a("we are currently writing - waiting to pause"),n++,this.once("drain",function(){a("pre-pause writing complete"),--n||t()}))}else t()},r.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;a("polling got data %s",e);var r=function(e){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};i.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){a("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;i.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+n.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e}},{"../transport":48,"component-inherit":55,debug:44,"engine.io-parser":56,parseqs:66,xmlhttprequest:54}],53:[function(e,t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),n.call(this,e)}var n=e("../transport"),o=e("engine.io-parser"),i=e("parseqs"),s=e("component-inherit"),a=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=r,s(r,n),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent};this.ws=new c(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){n.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){r.writable=!0,r.emit("drain")}var r=this;this.writable=!1;for(var n=0,i=e.length;i>n;n++)o.encodePacket(e[n],this.supportsBinary,function(e){try{r.ws.send(e)}catch(t){a("websocket closed before onclose event")}});setTimeout(t,0)},r.prototype.onClose=function(){n.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=i.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e},r.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===r.prototype.name)}},{"../transport":48,"component-inherit":55,debug:44,"engine.io-parser":56,parseqs:66,ws:67}],54:[function(e,t){var r=e("has-cors");t.exports=function(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(n){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}},{"has-cors":63}],55:[function(e,t){t.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],56:[function(e,t,r){(function(t){function n(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=p[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function o(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,r.encodePacket(e,t,n)},o.readAsArrayBuffer(e.data)}function i(e,t,n){if(!t)return r.encodeBase64Packet(e,n);if(f)return o(e,t,n);var i=new Uint8Array(1);i[0]=p[e.type];var s=new v([i.buffer,e.data]);return n(s)}function s(e,t,r){for(var n=new Array(e.length),o=h(e.length,r),i=function(e,r,o){t(r,function(t,r){n[e]=r,o(t,n)})},s=0;s<e.length;s++)i(s,e[s],o)}var a=e("./keys"),c=e("arraybuffer.slice"),u=e("base64-arraybuffer"),h=e("after"),l=e("utf8"),f=navigator.userAgent.match(/Android/i);r.protocol=2;var p=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=a(p),g={type:"error",data:"parser error"},v=e("blob");r.encodePacket=function(e,r,o){"function"==typeof r&&(o=r,r=!1);var s=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&s instanceof ArrayBuffer)return n(e,r,o);if(v&&s instanceof t.Blob)return i(e,r,o);var a=p[e.type];return void 0!==e.data&&(a+=l.encode(String(e.data))),o(""+a)},r.encodeBase64Packet=function(e,n){var o="b"+r.packets[e.type];if(v&&e.data instanceof v){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var c=new Uint8Array(e.data),u=new Array(c.length),h=0;h<c.length;h++)u[h]=c[h];s=String.fromCharCode.apply(null,u)}return o+=t.btoa(s),n(o)},r.decodePacket=function(e,t){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),t);e=l.decode(e);var n=e.charAt(0);return Number(n)==n&&d[n]?e.length>1?{type:d[n],data:e.substring(1)}:{type:d[n]}:g}var o=new Uint8Array(e),n=o[0],i=c(e,1);return v&&"blob"===t&&(i=new v([i])),{type:d[n],data:i}},r.decodeBase64Packet=function(e,r){var n=d[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=u.decode(e.substr(1));return"blob"===r&&v&&(o=new v([o])),{type:n,data:o}},r.encodePayload=function(e,t,n){function o(e){return e.length+":"+e}function i(e,n){r.encodePacket(e,t,function(e){n(null,o(e))})}return"function"==typeof t&&(n=t,t=null),t?v&&!f?r.encodePayloadAsBlob(e,n):r.encodePayloadAsArrayBuffer(e,n):e.length?void s(e,i,function(e,t){return n(t.join(""))}):n("0:")},r.decodePayload=function(e,t,n){if("string"!=typeof e)return r.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var o;if(""==e)return n(g,0,1);for(var i,s,a="",c=0,u=e.length;u>c;c++){var h=e.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(i=Number(a)))return n(g,0,1);if(s=e.substr(c+1,i),a!=s.length)return n(g,0,1);if(s.length){if(o=r.decodePacket(s,t),g.type==o.type&&g.data==o.data)return n(g,0,1);var l=n(o,c+i,u);if(!1===l)return}c+=i,a=""}}return""!=a?n(g,0,1):void 0},r.encodePayloadAsArrayBuffer=function(e,t){function n(e,t){r.encodePacket(e,!0,function(e){return t(null,e)})}return e.length?void s(e,n,function(e,r){var n=r.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return r.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}o[i++]=t?0:1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),t(o.buffer)}):t(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(e,t){function n(e,t){r.encodePacket(e,!0,function(e){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,r[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,v){var c=new v([r.buffer,a.buffer,e]);t(null,c)}})}s(e,n,function(e,r){return t(new v(r))})},r.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var o=e,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],u="",h=1;255!=s[h];h++)u+=s[h];o=c(o,2+u.length),u=parseInt(u);var l=c(o,0,u);if(a)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(f){var p=new Uint8Array(l);l="";for(var h=0;h<p.length;h++)l+=String.fromCharCode(p[h])}i.push(l),o=c(o,u)}var d=i.length;i.forEach(function(e,o){n(r.decodePacket(e,t),o,d)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":57,after:58,"arraybuffer.slice":59,"base64-arraybuffer":60,blob:61,utf8:62}],57:[function(e,t){t.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},{}],58:[function(e,t){function r(e,t,r){function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}var i=!1;return r=r||n,o.count=e,0===e?t():o}function n(){}t.exports=r},{}],59:[function(e,t){t.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(0>t&&(t+=n),0>r&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),s=t,a=0;r>s;s++,a++)i[a]=o[s];return i.buffer}},{}],60:[function(e,t,r){!function(e){"use strict";r.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;o>r;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var r,n,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),l=new Uint8Array(h);for(r=0;c>r;r+=4)n=e.indexOf(t[r]),o=e.indexOf(t[r+1]),i=e.indexOf(t[r+2]),s=e.indexOf(t[r+3]),l[u++]=n<<2|o>>4,l[u++]=(15&o)<<4|i>>2,l[u++]=(3&i)<<6|63&s;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],61:[function(e,t){(function(e){function r(e,t){t=t||{};for(var r=new n,o=0;o<e.length;o++)r.append(e[o]);return t.type?r.getBlob(t.type):r.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),i=n&&n.prototype.append&&n.prototype.getBlob;t.exports=function(){return o?e.Blob:i?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],62:[function(e,t,r){(function(e){!function(n){function o(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function i(e){for(var t,r=e.length,n=-1,o="";++n<r;)t=e[n],t>65535&&(t-=65536,o+=m(t>>>10&1023|55296),t=56320|1023&t),o+=m(t);return o}function s(e,t){return m(e>>t&63|128)}function a(e){if(0==(4294967168&e))return m(e);var t="";return 0==(4294965248&e)?t=m(e>>6&31|192):0==(4294901760&e)?(t=m(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=m(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=m(63&e|128)}function c(e){for(var t,r=o(e),n=r.length,i=-1,s="";++i<n;)t=r[i],s+=a(t);return s}function u(){if(y>=v)throw Error("Invalid byte index");var e=255&g[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function h(){var e,t,r,n,o;if(y>v)throw Error("Invalid byte index");if(y==v)return!1;if(e=255&g[y],y++,0==(128&e))return e;if(192==(224&e)){var t=u();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=u(),r=u(),o=(15&e)<<12|t<<6|r,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=u(),r=u(),n=u(),o=(15&e)<<18|t<<12|r<<6|n,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function l(e){g=o(e),v=g.length,y=0;for(var t,r=[];(t=h())!==!1;)r.push(t);return i(r)}var f="object"==typeof r&&r,p="object"==typeof t&&t&&t.exports==f&&t,d="object"==typeof e&&e;(d.global===d||d.window===d)&&(n=d);var g,v,y,m=String.fromCharCode,b={version:"2.0.0",encode:c,decode:l};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(f&&!f.nodeType)if(p)p.exports=b;else{var w={},_=w.hasOwnProperty;for(var x in b)_.call(b,x)&&(f[x]=b[x])}else n.utf8=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(e,t){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest
}catch(n){t.exports=!1}},{global:64}],64:[function(e,t){t.exports=function(){return this}()},{}],65:[function(e,t){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],66:[function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;o>n;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],67:[function(e,t){function r(e,t){var r;return r=t?new o(e,t):new o(e)}var n=function(){return this}(),o=n.WebSocket||n.MozWebSocket;t.exports=o?r:null,o&&(r.prototype=o.prototype)},{}],68:[function(e,t){(function(r,n){function o(e){function t(e){if(!e)return!1;if(r.Buffer&&n.isBuffer(e)||r.ArrayBuffer&&e instanceof ArrayBuffer||r.Blob&&e instanceof Blob||r.File&&e instanceof File)return!0;if(i(e)){for(var o=0;o<e.length;o++)if(t(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var s in e)if(t(e[s]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:1,isarray:69}],69:[function(e,t){t.exports=e(12)},{"D:\\DOCs\\PersonalProjects\\AppBin\\repos\\appbasejs-compact\\node_modules\\browserify\\node_modules\\isarray\\index.js":12}],70:[function(e,t){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],71:[function(e,t,r){var n=Object.prototype.hasOwnProperty;r.keys=Object.keys||function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},r.values=function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(e[r]);return t},r.merge=function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e},r.length=function(e){return r.keys(e).length},r.isEmpty=function(e){return 0==r.length(e)}},{}],72:[function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),o={},i=14;i--;)o[n[i]]=t[i]||"";return o}},{}],73:[function(e,t,r){(function(t,n){function o(e){return t.Buffer&&n.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}var i=e("isarray");r.deconstructPacket=function(e){function r(e){if(!e)return e;if(t.Buffer&&n.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer){var s={_placeholder:!0,num:o.length};return o.push(e),s}if(i(e)){for(var a=new Array(e.length),c=0;c<e.length;c++)a[c]=r(e[c]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var u in e)a[u]=r(e[u]);return a}return e}var o=[],s=e.data,a=e;return a.data=r(s),a.attachments=o.length,{packet:a,buffers:o}},r.reconstructPacket=function(e,t){function r(e){if(e&&e._placeholder){var n=t[e.num];return n}if(i(e)){for(var o=0;o<e.length;o++)e[o]=r(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=r(e[s]);return e}return e}return e.data=r(e.data),e.attachments=void 0,e},r.removeBlobs=function(e,r){function n(e,c,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var h=new FileReader;h.onload=function(){u?u[c]=this.result:a=this.result,--s||r(a)},h.readAsArrayBuffer(e)}if(i(e))for(var l=0;l<e.length;l++)n(e[l],l,e);else if(e&&"object"==typeof e&&!o(e))for(var f in e)n(e[f],f,e)}var s=0,a=e;n(a),s||r(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:1,isarray:76}],74:[function(e,t,r){(function(t,n){function o(){}function i(e){var t="",n=!1;return t+=e.type,(r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=f.stringify(e.data)),l("encoded %j as %s",e,t),t}function s(e,t){function r(e){var r=d.deconstructPacket(e),n=i(r.packet),o=r.buffers;o.unshift(n),t(o)}d.removeBlobs(e,r)}function a(){this.reconstructor=null}function c(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==r.types[t.type])return h();if(r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++n);)t.attachments+=e.charAt(n);t.attachments=Number(t.attachments)}if("/"==e.charAt(n+1))for(t.nsp="";++n;){var o=e.charAt(n);if(","==o)break;if(t.nsp+=o,n+1==e.length)break}else t.nsp="/";var i=e.charAt(n+1);if(""!=i&&Number(i)==i){for(t.id="";++n;){var o=e.charAt(n);if(null==o||Number(o)!=o){--n;break}if(t.id+=e.charAt(n),n+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=f.parse(e.substr(n))}catch(s){return h()}return l("decoded %s as %j",e,t),t}function u(e){this.reconPack=e,this.buffers=[]}function h(){return{type:r.ERROR,data:"parser error"}}var l=e("debug")("socket.io-parser"),f=e("json3"),p=(e("isarray"),e("emitter")),d=e("./binary");r.protocol=3,r.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=o,o.prototype.encode=function(e,t){if(l("encoding packet %j",e),r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)s(e,t);else{var n=i(e);t([n])}},r.Decoder=a,p(a.prototype),a.prototype.add=function(e){var o;if("string"==typeof e)o=c(e),r.BINARY_EVENT==o.type||r.BINARY_ACK==o.type?(this.reconstructor=new u(o),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",o)):this.emit("decoded",o);else{if(!(t.Buffer&&n.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||e.base64))throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");o=this.reconstructor.takeBinaryData(e),o&&(this.reconstructor=null,this.emit("decoded",o))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./binary":73,buffer:1,debug:44,emitter:75,isarray:76,json3:77}],75:[function(e,t){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var o=e("indexof");t.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;var n=o(r,t._off||t);return~n&&r.splice(n,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{indexof:70}],76:[function(e,t){t.exports=e(12)},{"D:\\DOCs\\PersonalProjects\\AppBin\\repos\\appbasejs-compact\\node_modules\\browserify\\node_modules\\isarray\\index.js":12}],77:[function(e,t,r){!function(e){function t(e){if(t[e]!==i)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var n,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=u.stringify,c="function"==typeof a&&h;if(c){(n=function(){return 1}).toJSON=n;try{c="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===i&&a(i)===i&&a()===i&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([i])&&"null"==a(null)&&"[null,null,null]"==a([i,s,null])&&a({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(l){c=!1}}r=c}if("json-parse"==e){var f=u.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){n=f(o);var p=5==n.a.length&&1===n.a[0];if(p){try{p=!f('"	"')}catch(l){}if(p)try{p=1!==f("01")}catch(l){}if(p)try{p=1!==f("1.")}catch(l){}}}}catch(l){p=!1}r=p}}return t[e]=!!r}var n,o,i,s={}.toString,a="function"==typeof define&&define.amd,c="object"==typeof JSON&&JSON,u="object"==typeof r&&r&&!r.nodeType&&r;u&&c?(u.stringify=c.stringify,u.parse=c.parse):u=e.JSON=c||{};var h=new Date(-0xc782b5b800cec);try{h=-109252==h.getUTCFullYear()&&0===h.getUTCMonth()&&1===h.getUTCDate()&&10==h.getUTCHours()&&37==h.getUTCMinutes()&&6==h.getUTCSeconds()&&708==h.getUTCMilliseconds()}catch(l){}if(!t("json")){var f="[object Function]",p="[object Date]",d="[object Number]",g="[object String]",v="[object Array]",y="[object Boolean]",m=t("bug-string-char-index");if(!h)var b=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(e,t){return w[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(n={}.hasOwnProperty)||(n=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=s?n=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,n=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,n.call(this,e)});var x={"boolean":1,number:1,string:1,undefined:1},k=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!x[r]};if(o=function(e,t){var r,i,a,c=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,i=new r;for(a in i)n.call(i,a)&&c++;return r=i=null,c?o=2==c?function(e,t){var r,o={},i=s.call(e)==f;for(r in e)i&&"prototype"==r||n.call(o,r)||!(o[r]=1)||!n.call(e,r)||t(r)}:function(e,t){var r,o,i=s.call(e)==f;for(r in e)i&&"prototype"==r||!n.call(e,r)||(o="constructor"===r)||t(r);(o||n.call(e,r="constructor"))&&t(r)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var r,o,a=s.call(e)==f,c=!a&&"function"!=typeof e.constructor&&k(e,"hasOwnProperty")?e.hasOwnProperty:n;for(r in e)a&&"prototype"==r||!c.call(e,r)||t(r);for(o=i.length;r=i[--o];c.call(e,r)&&t(r));}),o(e,t)},!t("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",S=function(e,t){return(A+(t||0)).slice(-e)},T="\\u00",j=function(e){var t,r='"',n=0,o=e.length,i=o>10&&m;for(i&&(t=e.split(""));o>n;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=E[s];break;default:if(32>s){r+=T+S(2,s.toString(16));break}r+=i?t[n]:m?e.charAt(n):e[n]}}return r+'"'},C=function(e,t,r,a,c,u,h){var l,f,m,w,x,k,E,A,T,R,L,O,P,U,B,N;try{l=t[e]}catch(D){}if("object"==typeof l&&l)if(f=s.call(l),f!=p||n.call(l,"toJSON"))"function"==typeof l.toJSON&&(f!=d&&f!=g&&f!=v||n.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&1/0>l){if(_){for(x=b(l/864e5),m=b(x/365.2425)+1970-1;_(m+1,0)<=x;m++);for(w=b((x-_(m,0))/30.42);_(m,w+1)<=x;w++);x=1+x-_(m,w),k=(l%864e5+864e5)%864e5,E=b(k/36e5)%24,A=b(k/6e4)%60,T=b(k/1e3)%60,R=k%1e3}else m=l.getUTCFullYear(),w=l.getUTCMonth(),x=l.getUTCDate(),E=l.getUTCHours(),A=l.getUTCMinutes(),T=l.getUTCSeconds(),R=l.getUTCMilliseconds();l=(0>=m||m>=1e4?(0>m?"-":"+")+S(6,0>m?-m:m):S(4,m))+"-"+S(2,w+1)+"-"+S(2,x)+"T"+S(2,E)+":"+S(2,A)+":"+S(2,T)+"."+S(3,R)+"Z"}else l=null;if(r&&(l=r.call(t,e,l)),null===l)return"null";if(f=s.call(l),f==y)return""+l;if(f==d)return l>-1/0&&1/0>l?""+l:"null";if(f==g)return j(""+l);if("object"==typeof l){for(U=h.length;U--;)if(h[U]===l)throw TypeError();if(h.push(l),L=[],B=u,u+=c,f==v){for(P=0,U=l.length;U>P;P++)O=C(P,l,r,a,c,u,h),L.push(O===i?"null":O);N=L.length?c?"[\n"+u+L.join(",\n"+u)+"\n"+B+"]":"["+L.join(",")+"]":"[]"}else o(a||l,function(e){var t=C(e,l,r,a,c,u,h);t!==i&&L.push(j(e)+":"+(c?" ":"")+t)}),N=L.length?c?"{\n"+u+L.join(",\n"+u)+"\n"+B+"}":"{"+L.join(",")+"}":"{}";return h.pop(),N}};u.stringify=function(e,t,r){var n,o,i,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==f)o=t;else if(a==v){i={};for(var c,u=0,h=t.length;h>u;c=t[u++],a=s.call(c),(a==g||a==d)&&(i[c]=1));}if(r)if((a=s.call(r))==d){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==g&&(n=r.length<=10?r:r.slice(0,10));return C("",(c={},c[""]=e,c),o,i,n,"",[])}}if(!t("json-parse")){var R,L,O=String.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw R=L=null,SyntaxError()},B=function(){for(var e,t,r,n,o,i=L,s=i.length;s>R;)switch(o=i.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=m?i.charAt(R):i[R],R++,e;case 34:for(e="@",R++;s>R;)if(o=i.charCodeAt(R),32>o)U();else if(92==o)switch(o=i.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[o],R++;break;case 117:for(t=++R,r=R+4;r>R;R++)o=i.charCodeAt(R),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||U();e+=O("0x"+i.slice(t,R));break;default:U()}else{if(34==o)break;for(o=i.charCodeAt(R),t=R;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++R);e+=i.slice(t,R)}if(34==i.charCodeAt(R))return R++,e;U();default:if(t=R,45==o&&(n=!0,o=i.charCodeAt(++R)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(R+1),o>=48&&57>=o)&&U(),n=!1;s>R&&(o=i.charCodeAt(R),o>=48&&57>=o);R++);if(46==i.charCodeAt(R)){for(r=++R;s>r&&(o=i.charCodeAt(r),o>=48&&57>=o);r++);r==R&&U(),R=r}if(o=i.charCodeAt(R),101==o||69==o){for(o=i.charCodeAt(++R),(43==o||45==o)&&R++,r=R;s>r&&(o=i.charCodeAt(r),o>=48&&57>=o);r++);r==R&&U(),R=r}return+i.slice(t,R)}if(n&&U(),"true"==i.slice(R,R+4))return R+=4,!0;if("false"==i.slice(R,R+5))return R+=5,!1;if("null"==i.slice(R,R+4))return R+=4,null;U()}return"$"},N=function(e){var t,r;if("$"==e&&U(),"string"==typeof e){if("@"==(m?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=B(),"]"!=e;r||(r=!0))r&&(","==e?(e=B(),"]"==e&&U()):U()),","==e&&U(),t.push(N(e));return t}if("{"==e){for(t={};e=B(),"}"!=e;r||(r=!0))r&&(","==e?(e=B(),"}"==e&&U()):U()),(","==e||"string"!=typeof e||"@"!=(m?e.charAt(0):e[0])||":"!=B())&&U(),t[e.slice(1)]=N(B());return t}U()}return e},D=function(e,t,r){var n=I(e,t,r);n===i?delete e[t]:e[t]=n},I=function(e,t,r){var n,i=e[t];if("object"==typeof i&&i)if(s.call(i)==v)for(n=i.length;n--;)D(i,n,r);else o(i,function(e){D(i,e,r)});return r.call(e,t,i)};u.parse=function(e,t){var r,n;return R=0,L=""+e,r=N(B()),"$"!=B()&&U(),R=L=null,t&&s.call(t)==f?I((n={},n[""]=r,n),"",t):r}}}a&&define(function(){return u})}(this)},{}],78:[function(e,t){function r(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}t.exports=r},{}],79:[function(e,t){(function(r,n){(function(){var o,i,s,a,c,u,h,l,f,p,d,g={}.hasOwnProperty,v=function(e,t){function r(){this.constructor=e}for(var n in t)g.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=function(){function e(){this.onloadstart=null,this.onprogress=null,this.onabort=null,this.onerror=null,this.onload=null,this.ontimeout=null,this.onloadend=null,this._listeners={}}return e.prototype.onloadstart=null,e.prototype.onprogress=null,e.prototype.onabort=null,e.prototype.onerror=null,e.prototype.onload=null,e.prototype.ontimeout=null,e.prototype.onloadend=null,e.prototype.addEventListener=function(e,t){var r;return e=e.toLowerCase(),(r=this._listeners)[e]||(r[e]=[]),void this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){var r;return e=e.toLowerCase(),void(this._listeners[e]&&(r=this._listeners[e].indexOf(t),-1!==r&&this._listeners.splice(r,1)))},e.prototype.dispatchEvent=function(e){var t,r,n,o,i;if(e.currentTarget=e.target=this,t=e.type,n=this._listeners[t])for(o=0,i=n.length;i>o;o++)r=n[o],r.call(this,e);return void((r=this["on"+t])&&r.call(this,e))},e}(),l=e("http"),f=e("https"),p=e("os"),d=e("url"),c=function(e){function t(e){t.__super__.constructor.call(this),this.onreadystatechange=null,this._anonymous=e&&e.anon,this.readyState=t.UNSENT,this.response=null,this.responseText="",this.responseType="",this.status=0,this.statusText="",this.timeout=0,this.upload=new h(this),this._method=null,this._url=null,this._sync=!1,this._headers=null,this._loweredHeaders=null,this._mimeOverride=null,this._request=null,this._response=null,this._responseParts=null,this._responseHeaders=null,this._aborting=null,this._error=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1}return v(t,e),t.prototype.onreadystatechange=null,t.prototype.readyState=null,t.prototype.response=null,t.prototype.responseText=null,t.prototype.responseType=null,t.prototype.status=null,t.prototype.timeout=null,t.prototype.upload=null,t.prototype.open=function(e,r,n){var o;if(e=e.toUpperCase(),e in this._restrictedMethods)throw new a("HTTP method "+e+" is not allowed in XHR");switch(o=this._parseUrl(r),void 0===n&&(n=!0),this.readyState){case t.UNSENT:case t.OPENED:case t.DONE:break;case t.HEADERS_RECEIVED:case t.LOADING:}return this._method=e,this._url=o,this._sync=!n,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(t.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,void(this._lengthComputable=!1)},t.prototype.setRequestHeader=function(e,r){var n;if(this.readyState!==t.OPENED)throw new o("XHR readyState must be OPENED");return n=e.toLowerCase(),this._restrictedHeaders[n]||/^sec\-/.test(n)||/^proxy-/.test(n)?void console.warn('Refused to set unsafe header "'+e+'"'):(r=r.toString(),void(n in this._loweredHeaders?(e=this._loweredHeaders[n],this._headers[e]=this._headers[e]+", "+r):(this._loweredHeaders[n]=e,this._headers[e]=r)))},t.prototype.send=function(e){if(this.readyState!==t.OPENED)throw new o("XHR readyState must be OPENED");if(this._request)throw new o("send() already called");switch(this._url.protocol){case"file:":this._sendFile(e);break;case"http:":case"https:":this._sendHttp(e);break;default:throw new i("Unsupported protocol "+this._url.protocol)}return void 0},t.prototype.abort=function(){return this._request?(this._request.abort(),this._setError(),this._dispatchProgress("abort"),void this._dispatchProgress("loadend")):void 0},t.prototype.getResponseHeader=function(e){var t;return this._responseHeaders?(t=e.toLowerCase(),t in this._responseHeaders?this._responseHeaders[t]:null):null},t.prototype.getAllResponseHeaders=function(){var e,t,r;return this._responseHeaders?(e=function(){var e,n;e=this._responseHeaders,n=[];for(t in e)r=e[t],n.push(""+t+": "+r);return n}.call(this),e.join("\r\n")):""},t.prototype.overrideMimeType=function(e){if(this.readyState===t.LOADING||this.readyState===t.DONE)throw new o("overrideMimeType() not allowed in LOADING or DONE");return void(this._mimeOverride=e.toLowerCase())},t.prototype.nodejsSet=function(e){return"httpAgent"in e&&(this.nodejsHttpAgent=e.httpAgent),void("httpsAgent"in e&&(this.nodejsHttpsAgent=e.httpsAgent))},t.nodejsSet=function(e){return void t.prototype.nodejsSet(e)},t.prototype.UNSENT=0,t.UNSENT=0,t.prototype.OPENED=1,t.OPENED=1,t.prototype.HEADERS_RECEIVED=2,t.HEADERS_RECEIVED=2,t.prototype.LOADING=3,t.LOADING=3,t.prototype.DONE=4,t.DONE=4,t.prototype.nodejsHttpAgent=l.globalAgent,t.prototype.nodejsHttpsAgent=f.globalAgent,t.prototype._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},t.prototype._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},t.prototype._privateHeaders={"set-cookie":!0,"set-cookie2":!0},t.prototype._userAgent="Mozilla/5.0 ("+p.type()+" "+p.arch()+") "+("node.js/"+r.versions.node+" v8/"+r.versions.v8),t.prototype._setReadyState=function(e){var t;return this.readyState=e,t=new s("readystatechange"),void this.dispatchEvent(t)},t.prototype._sendFile=function(){if("GET"!==this._url.method)throw new i("The file protocol only supports GET");throw new Error("Protocol file: not implemented")},t.prototype._sendHttp=function(e){if(this._sync)throw new Error("Synchronous XHR processing not implemented");return null==e||"GET"!==this._method&&"HEAD"!==this._method?e||(e=""):(console.warn("Discarding entity body for "+this._method+" requests"),e=null),this.upload._setData(e),this._finalizeHeaders(),void this._sendHxxpRequest()},t.prototype._sendHxxpRequest=function(){var e,t,r;return"http:"===this._url.protocol?(t=l,e=this.nodejsHttpAgent):(t=f,e=this.nodejsHttpsAgent),r=t.request({hostname:this._url.hostname,port:this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:e}),this._request=r,this.timeout&&r.setTimeout(this.timeout,function(e){return function(){return e._onHttpTimeout(r)}}(this)),r.on("response",function(e){return function(t){return e._onHttpResponse(r,t)}}(this)),r.on("error",function(e){return function(t){return e._onHttpRequestError(r,t)}}(this)),this.upload._startUpload(r),void(this._request===r&&this._dispatchProgress("loadstart"))},t.prototype._finalizeHeaders=function(){return this._headers.Connection="keep-alive",this._headers.Host=this._url.host,this._anonymous&&(this._headers.Referer="about:blank"),this._headers["User-Agent"]=this._userAgent,void this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},t.prototype._onHttpResponse=function(e,r){var n;if(this._request===e){switch(r.statusCode){case 301:case 302:case 303:case 307:case 308:return this._url=this._parseUrl(r.headers.location),this._method="GET","content-type"in this._loweredHeaders&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),"Content-Type"in this._headers&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),void this._sendHxxpRequest()}return this._response=r,this._response.on("data",function(e){return function(t){return e._onHttpResponseData(r,t)}}(this)),this._response.on("end",function(e){return function(){return e._onHttpResponseEnd(r)}}(this)),this._response.on("close",function(e){return function(){return e._onHttpResponseClose(r)}}(this)),this.status=this._response.statusCode,this.statusText=l.STATUS_CODES[this.status],this._parseResponseHeaders(r),(n=this._responseHeaders["content-length"])?(this._totalBytes=parseInt(n),this._lengthComputable=!0):this._lengthComputable=!1,this._setReadyState(t.HEADERS_RECEIVED)}},t.prototype._onHttpResponseData=function(e,r){return this._response===e?(this._responseParts.push(r),this._loadedBytes+=r.length,this.readyState!==t.LOADING&&this._setReadyState(t.LOADING),this._dispatchProgress("progress")):void 0},t.prototype._onHttpResponseEnd=function(e){return this._response===e?(this._parseResponse(),this._request=null,this._response=null,this._setReadyState(t.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend")):void 0},t.prototype._onHttpResponseClose=function(e){var r;if(this._response===e)return r=this._request,this._setError(),r.abort(),this._setReadyState(t.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")},t.prototype._onHttpTimeout=function(e){return this._request===e?(this._setError(),e.abort(),this._setReadyState(t.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend")):void 0},t.prototype._onHttpRequestError=function(e){return this._request===e?(this._setError(),e.abort(),this._setReadyState(t.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")):void 0},t.prototype._dispatchProgress=function(e){var t;return t=new s(e),t.lengthComputable=this._lengthComputable,t.loaded=this._loadedBytes,t.total=this._totalBytes,void this.dispatchEvent(t)},t.prototype._setError=function(){return this._request=null,this._response=null,this._responseHeaders=null,void(this._responseParts=null)},t.prototype._parseUrl=function(e){var t,r,n,o;return o=d.parse(e,!1,!0),o.hash=null,o.auth&&("undefined"!=typeof n&&null!==n||"undefined"!=typeof r&&null!==r)&&(t=o.auth.indexOf(":"),-1===t?n||(n=o.auth):(n||(n=o.substring(0,t)),r||(r=o.substring(t+1)))),(n||r)&&(o.auth=""+n+":"+r),o},t.prototype._parseResponseHeaders=function(e){var t,r,n,o;this._responseHeaders={},o=e.headers;for(r in o)n=o[r],t=r.toLowerCase(),this._privateHeaders[t]||(null!==this._mimeOverride&&"content-type"===t&&(n=this._mimeOverride),this._responseHeaders[t]=n);return void(null===this._mimeOverride||"content-type"in this._responseHeaders||(this._responseHeaders["content-type"]=this._mimeOverride))},t.prototype._parseResponse=function(){var e,t,r,o,i,s,a;switch(t=n.concat?n.concat(this._responseParts):this._concatBuffers(this._responseParts),this._responseParts=null,this.responseType){case"text":this._parseTextResponse(t);break;case"json":this.responseText=null;try{this.response=JSON.parse(t.toString("utf-8"))}catch(c){o=c,this.response=null}break;case"buffer":this.responseText=null,this.response=t;break;case"arraybuffer":for(this.responseText=null,e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=s=0,a=t.length;a>=0?a>s:s>a;r=a>=0?++s:--s)i[r]=t[r];this.response=e;break;default:this._parseTextResponse(t)}return void 0},t.prototype._parseTextResponse=function(e){var t;try{this.responseText=e.toString(this._parseResponseEncoding())}catch(r){t=r,this.responseText=e.toString("binary")}return void(this.response=this.responseText)},t.prototype._parseResponseEncoding=function(){var e,t,r;return t=null,(e=this._responseHeaders["content-type"])&&(r=/\;\s*charset\=(.*)$/.exec(e))?r[1]:"utf-8"},t.prototype._concatBuffers=function(e){var t,r,o,i,s,a,c;if(0===e.length)return new n(0);if(1===e.length)return e[0];for(r=0,i=0,a=e.length;a>i;i++)t=e[i],r+=t.length;for(o=new n(r),r=0,s=0,c=e.length;c>s;s++)t=e[s],t.copy(o,r),r+=t.length;return o},t}(u),t.exports=c,c.XMLHttpRequest=c,a=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return v(t,e),t}(Error),c.SecurityError=a,o=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return v(t,e),t}(Error),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t}(Error),c.InvalidStateError=o,i=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return v(t,e),t}(Error),c.NetworkError=i,s=function(){function e(e){this.type=e,this.target=null,this.currentTarget=null,this.lengthComputable=!1,this.loaded=0,this.total=0}return e.prototype.bubbles=!1,e.prototype.cancelable=!1,e.prototype.target=null,e.prototype.loaded=null,e.prototype.lengthComputable=null,e.prototype.total=null,e}(),c.ProgressEvent=s,h=function(e){function t(e){t.__super__.constructor.call(this),this._request=e,this._reset()}return v(t,e),t.prototype._reset=function(){return this._contentType=null,void(this._body=null)},t.prototype._setData=function(e){var t,r,o,i,s,a,c,u;if("undefined"!=typeof e&&null!==e){if("string"==typeof e)0!==e.length&&(this._contentType="text/plain;charset=UTF-8"),this._body=new n(e,"utf8");else if(n.isBuffer(e))this._body=e;else if(e instanceof ArrayBuffer){for(t=new n(e.byteLength),i=new Uint8Array(e),r=s=0,c=e.byteLength;c>=0?c>s:s>c;r=c>=0?++s:--s)t[r]=i[r];this._body=t}else{if(!(e.buffer&&e.buffer instanceof ArrayBuffer))throw new Error("Unsupported send() data "+e);for(t=new n(e.byteLength),o=e.byteOffset,i=new Uint8Array(e.buffer),r=a=0,u=e.byteLength;u>=0?u>a:a>u;r=u>=0?++a:--a)t[r]=i[r+o];this._body=t}return void 0}},t.prototype._finalizeHeaders=function(e,t){return this._contentType&&("content-type"in t||(e["Content-Type"]=this._contentType)),void(this._body&&(e["Content-Length"]=this._body.length.toString()))},t.prototype._startUpload=function(e){return this._body&&e.write(this._body),void e.end()},t}(u),c.XMLHttpRequestUpload=h}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:14,buffer:1,http:6,https:10,os:13,url:32}],80:[function(e,t){var r=e("./index.js"),n=e("./oauthio.js"),o=e("./../atomic.js");r.auth={config:{oauthdURL:"https://auth.appbase.io/",oauthMiddleSever:"https://auth.appbase.io:3000",oauthTokenURL:"/oauth/signin",oauthRefreshURL:"/oauth/refresh"},initOauthio:function(e){n.initialize(e),n.setOAuthdURL(r.auth.config.oauthdURL)},codeToCreds:function(e,t,n){var i={app:r.server.getApp(),code:t,provider:e};o.post(r.auth.config.oauthMiddleSever+r.auth.config.oauthTokenURL,i).success(n.bind(null,null)).error(function(e){r.auth.unauth(),n(e)})},credsToRequetObj:function(e){return n.create(e.credentials.provider.provider,e.credentials.provider)},saveCreds:function(e){localStorage.setItem("appbase_credentials",JSON.stringify(e))},restoreCreds:function(){try{return JSON.parse(localStorage.getItem("appbase_credentials"))}catch(e){return null}},unauth:function(){r.auth.saveCreds(null),r.server.setAppbaseToken(null);var e=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"};e("oauthio_provider_google"),e("oauthio_provider_linkedin"),e("oauthio_provider_facebook"),e("oauthio_provider_dropbox"),e("oauthio_provider_github")}},t.exports=r.auth},{"./../atomic.js":90,"./index.js":83,"./oauthio.js":86}],81:[function(e,t){var r=e("./index.js");r.cache={memStore:{},timestamps:{},newVertices:{},set:function(e,t,n){"edges"===e&&console.log("cache setting:",t),r.cache.memStore.hasOwnProperty(t)||(r.cache.memStore[t]={vertex:{},edges:{}},r.cache.timestamps[t]={});for(var o in n)("vertex"!==e||"_id"!==o&&"timestamp"!==o&&"rootPath"!==o)&&(r.cache.memStore[t][e][o]=n[o],"edges"===e&&(void 0===r.cache.timestamps[t][e]||r.cache.timestamps[t][e]<n[o].timestamp)&&(r.cache.timestamps[t][e]=n[o].timestamp));"vertex"===e&&(r.cache.timestamps[t][e]=n.timestamp)},get:function(e,t,n){"edges"===e&&console.log("cache getting:",t);var n=void 0===n?!0:n;return n&&r.cache.memStore.hasOwnProperty(t)?JSON.parse(JSON.stringify(r.cache.memStore[t][e])):!n&&r.cache.memStore.hasOwnProperty(t)?r.cache.memStore[t][e]:{}},remove:function(e,t,n){if("edges"===e&&console.log("cache removing:",t),r.cache.memStore.hasOwnProperty(t)&&"undefined"==typeof n)r.cache.memStore[t][e]={};else if(r.cache.memStore.hasOwnProperty(t))for(var o in n)delete r.cache.memStore[t][e][n[o]]}},t.exports=r.cache},{"./index.js":83}],82:[function(e,t){var r=e("./index.js"),n=e("./../amplify.js");r.firing={prepareForProperties:function(e,t,n,o,i){r.firing.fireForProperties(t,n,o,i)},prepareForEdges:function(e,t,n,o,i){switch(console.log("fire preparing:",t),e){case"REMOVE ALL":for(var s in n)r.firing.fireForEdges(t,"edge_removed",n[s],{},s,i);break;case"REMOVE":for(var s in o)void 0!==n[s]&&r.firing.fireForEdges(t,"edge_removed",n[s],{},s,i);
break;default:for(var s in o)void 0!==n[s]?r.firing.fireForEdges(t,"edge_changed",n[s],o[s],s,i):r.firing.fireForEdges(t,"edge_added",{},o[s],s,i)}},prepareForNS:function(e,t,n,o,i){switch(e){case"DESTROY":for(var s in o)void 0!==n[s]&&r.firing.fireForNS(t,"vertex_removed",n[s],i);break;default:for(var s in o)void 0===n[s]&&r.firing.fireForNS(t,"vertex_added",o[s],i)}},fireForNS:function(e,t,o,i){"function"==typeof i?i(null,r.interface.vertex(o.rootPath)):n.publish(t+":"+e,null,r.interface.vertex(o.rootPath))},fireForProperties:function(e,t,o,i){var s=r.util.createVertexSnapshot(t,o);"function"==typeof i?i(null,r.interface.vertex(r.util.URLToPath(e)),s):n.publish("properties:"+e,null,r.interface.vertex(r.util.URLToPath(e)),s)},fireForEdges:function(e,t,o,i,s,a){console.log("firing:",e);var c=r.util.createEdgeSnapshot(o,i,s);"function"==typeof a?a(null,r.interface.vertex(r.util.URLToPath(e)+"/"+s),c):n.publish(t+":"+e,null,r.interface.vertex(r.util.URLToPath(e)+"/"+s),c)}},t.exports=r.firing},{"./../amplify.js":89,"./index.js":83}],83:[function(e,t){var r={},n=e("./../config.js");r.interface=e("./interface.js"),n.isWindow&&(r.auth=e("./auth.js")),r.cache=e("./cache.js"),r.server=e("./server.js"),r.util=e("./util.js"),r.firing=e("./firing.js"),r.inputHandling=e("./input-handling.js"),t.exports=r},{"./../config.js":92,"./auth.js":80,"./cache.js":81,"./firing.js":82,"./input-handling.js":84,"./interface.js":85,"./server.js":87,"./util.js":88}],84:[function(e,t){var r=e("./index.js");r.inputHandling={};var n=function(e,t){switch(t){case"alphaNumUnder":var o=new RegExp("^[a-zA-Z0-9_]*$");if("string"!=typeof e||""===e||!o.test(e))return"an alphanumeric string with underscores";break;case"nsRef":if("object"!=typeof e||!e.isNS)return"an appbase namespace reference";break;case"vRef":if("object"!=typeof e||!e.isV)return"an appbase vertex reference";break;case"vPath":e=r.util.cutLeadingTrailingSlashes(e);var o=new RegExp("^[a-zA-Z0-9_/]*$");if("string"!=typeof e||""===e||!o.test(e))return"a vertex path - an alphanumeric string with underscores and slashes";break;case"vKey":e=r.util.cutLeadingTrailingSlashes(e);var i=n(e,"alphaNumUnder");if(i)return"a vertex key - "+i;break;case"pName":var i=n(e,"alphaNumUnder");if(i)return"a property name - "+i;break;case"pNameOrArray":var s,a="a property name - an alphanumeric string with underscores, or an array of property names";if(e instanceof Array){if(e.forEach(function(e){s=s||n(e,"pName")}),s)return a}else if(n(e,"pName"))return a;break;case"eName":var i=n(e,"alphaNumUnder");if(i)return"an edge name - "+i;break;case"eNameOrArray":var s,a="an edge name - an alphanumeric string with underscores, or an array of edge names";if(e instanceof Array){if(e.forEach(function(e){s=s||n(e,"eName")}),s)return a}else if(n(e,"eName"))return a;break;case"ns":var i=n(e,"alphaNumUnder");if(i)return"a namespace identifier - "+i;break;case"vEvent":if("string"!=typeof e||""===e||"edge_added"!==e&&"edge_removed"!==e&&"edge_changed"!==e&&"properties"!==e)return"a vertex event";break;case"nsEvent":if("string"!=typeof e||""===e||"vertex_added"!==e&&"vertex_removed"!==e)return"a namespace event";break;case"eFilters":if("object"!=typeof e)return"edge filters - an object";if("number"!=typeof e.startAt&&"undefined"!=typeof e.startAt)return"edge filters - an object with 'startAt' as a number";if("number"!=typeof e.endAt&&"undefined"!=typeof e.endAt)return"edge filters - an object with 'endAt' as a number";if("number"!=typeof e.limit&&"undefined"!=typeof e.limit)return"edge filters - an object with 'limit' as a number";if("number"!=typeof e.skip&&"undefined"!=typeof e.skip)return"edge filters - an object with 'skip' as a number";if("boolean"!=typeof e.onlyNew&&"undefined"!=typeof e.onlyNew)return"edge filters - an object with 'onlyNew' as a boolean";break;case"provider":if("google"!==e&&"linkedin"!==e&&"facebook"!==e&&"github"!==e&&"dropbox"!==e)return"a provider name";break;case"app":var i=n(e,"alphaNumUnder");if(i)return"application name - "+i;break;case"secret":var o=new RegExp("^[a-zA-Z0-9_]*$");if("string"!=typeof e||""===e||!o.test(e))return"application secret - an alphanumeric string";break;default:if(typeof e!==t)return"a "+t}};r.inputHandling.doIt=function(e,t){for(var r,o=0,i={},s=[],a=function(){var e="Expected Arguments: ";return t.forEach(function(r,n){e+=r.name+(s[n]||r.optional?" ("+(r.optional?"optional":"")+(s[n]?(r.optional?" - ":"")+s[n]:"")+")":""),e+=n+1===t.length?".":", "}),e},c=0;c<t.length;c+=1){var u;(u=n(e[o],t[c].type))?t[c].optional?i[t[c].name]=t[c].defaultVal:(r=!0,o+=1):(i[t[c].name]=e[o],o+=1),s[c]=u}return r||o<e.length?{error:a()}:i},t.exports=r.inputHandling},{"./index.js":83}],85:[function(e,t){var r=e("./index.js"),n=e("./../config.js"),o=e("./../amplify.js");if(r.interface={},n.isWindow){var i=e("./oauthio.js");r.interface.auth={completeAuth:function(e,t){return function(n,o){if(n)return r.auth.unauth(),void t(n);var i=r.auth.restoreCreds();i&&Date.now()/1e3<i.credentials.appbase.expires_in+i.credentials.appbase.generated_at?(r.server.setAppbaseToken(i.credentials.appbase.access_token),t(null,i,r.auth.credsToRequetObj(i))):(r.auth.saveCreds(null),r.auth.codeToCreds(e,o.code,function(e,n){return e?(r.auth.unauth(),t(e)):(n.credentials.appbase.generated_at=Date.now()/1e3-2,n.credentials.provider.generated_at=n.credentials.appbase.generated_at,r.auth.saveCreds(n),r.server.setAppbaseToken(n.credentials.appbase.access_token),void t(null,n,r.auth.credsToRequetObj(n)))}))}},callback:function(){var e=r.inputHandling.doIt(arguments,[{name:"provider",type:"provider"},{name:"callback",type:"function"}]);if(e.error)throw e.error;i.callback(e.provider,r.interface.auth.completeAuth(e.provider,e.callback))},auth:function(e,t,n){t.cache=!0,t.authorize||(t.authorize={}),t.authorize.response_type="code";var o;if("function"==(o=typeof n))i.popup(e,t,r.interface.auth.completeAuth(e,n));else{if("string"!==o)throw"Invalid argument:"+n.toString();i.redirect(e,t,n)}},authPopup:function(){var e=r.inputHandling.doIt(arguments,[{name:"provider",type:"provider"},{name:"options",type:"object",optional:!0,defaultVal:{}},{name:"callback",type:"function"}]);if(e.error)throw e.error;r.interface.auth.auth(e.provider,e.options,e.callback)},authRedirect:function(){var e=r.inputHandling.doIt(arguments,[{name:"provider",type:"provider"},{name:"options",type:"object",optional:!0,defaultVal:{}},{name:"redirectURL",type:"string"}]);if(e.error)throw e.error;r.interface.auth.auth(e.provider,e.options,e.redirectURL)},unauth:function(){r.auth.unauth()}}}r.interface.ns=function(e){var t=r.util.uuid(),n={isNS:!0};return n.type=function(){return"namespace"},n.URL=function(){return r.util.pathToURL(e)},n.path=function(){return e},n.v=function(){var t=r.inputHandling.doIt(arguments,[{name:"path",type:"vPath"}]);if(t.error)throw t.error;var n=e+"/"+r.util.cutLeadingTrailingSlashes(t.path);return r.interface.create(n,!0),r.interface.vertex(n)},n.search=function(t,n){r.server.search(e,t,n)},n.on=function(){var e=r.inputHandling.doIt(arguments,[{name:"event",type:"nsEvent"},{name:"callback",type:"function"}]);if(e.error)throw e.error;r.server.ns.namespacesListening[n.URL()]&&"vertex_added"===e.event&&setTimeout(function(){r.firing.prepareForNS("RETR",n.URL(),{},r.cache.get("edges",n.URL()),e.callback)},0),o.subscribe(e.event+":"+n.URL(),t,e.callback),r.server.ns.namespacesListening[n.URL()]||r.server.ns.listen(n.URL(),{filters:{}},function(r){if(r){if(!e.callback)throw r;e.callback(r),o.unsubscribe(e.event+":"+n.URL(),t)}})},n.off=function(){var e=r.inputHandling.doIt(arguments,[{name:"event",type:"nsEvent",optional:!0}]);if(e.error)throw e.error;e.event?o.unsubscribe(e.event+":"+n.URL(),t):(o.unsubscribe("vertex_added:"+n.URL(),t),o.unsubscribe("vertex_removed:"+n.URL(),t)),0===o.subscriptionCount("vertex_added:"+n.URL())&&0===o.subscriptionCount("vertex_removed:"+n.URL())},n},r.interface.isValid=function(e,t){r.server.vertex.get(e,function(e){var r=null!==e&&"101: Resource does not exist"!==e?e:null;t&&(r?t(r):t(null,"101: Resource does not exist"!==e))})},r.interface.create=function(e,t){if(!e)throw"Invalid arguments";e=r.util.cutLeadingTrailingSlashes(e);var n=r.interface.vertex(e);r.cache.newVertices[e]=!0;var o=function(){r.server.vertex.set(r.util.pathToURL(e),{},function(){delete r.cache.newVertices[e]})};return t?r.interface.isValid(n.URL(),function(t,n){n?delete r.cache.newVertices[e]:o()}):o(),n},r.interface.vertex=function(e){var t=r.util.uuid(),n={onProperties:function(e){r.server.vertex.urlsListening[i.URL()]&&r.cache.timestamps[i.URL()]&&r.cache.timestamps[i.URL()].vertex&&setTimeout(function(){r.firing.prepareForProperties("RETR",i.URL(),{},r.cache.get("vertex",i.URL()),e)},0),o.subscribe("properties:"+i.URL(),t,e),r.server.vertex.urlsListening[i.URL()]||r.server.vertex.listen(i.URL(),{all:!0},function(n){n&&(e(n),o.unsubscribe("properties:"+i.URL(),t),0===o.subscriptionCount("properties:"+i.URL())&&r.server.vertex.unlisten(i.URL()))})},onEdges:function(e,s,a){var c={filters:s},u=function(){delete s.onlyNew,n.filterString=r.util.generateFilterString(c),r.server.edges.urlsListening[i.URL()+n.filterString]&&"edge_added"==e&&setTimeout(function(){r.firing.prepareForEdges("RETR",i.URL()+n.filterString,{},r.cache.get("edges",i.URL()+n.filterString),a)},0),o.subscribe(e+":"+i.URL()+n.filterString,t,a),r.server.edges.urlsListening[i.URL()+n.filterString]||r.server.edges.listen(i.URL(),c,function(r){r&&(a(r),o.unsubscribe(e+":"+i.URL()+n.filterString,t))})};s.onlyNew?r.server.timestamp(function(e,t){return e?a(e):(c.timestamp=t,void u())}):u()}},i={isV:!0};return i.type=function(){return"vertex"},i.URL=function(){return r.util.pathToURL(e)},i.path=function(){return e},i.outVertex=function(){var t=r.inputHandling.doIt(arguments,[{name:"edgeName",type:"eName"}]);if(t.error)throw t.error;return new r.interface.vertex(e+"/"+t.edgeName)},i.inVertex=function(){return new r.interface.vertex(e.slice(0,e.lastIndexOf("/")))},i.on=function(){var t=r.inputHandling.doIt(arguments,[{name:"event",type:"vEvent"},{name:"filters",type:"eFilters",optional:!0,defaultVal:{}},{name:"callback",type:"function"}]);if(t.error)throw t.error;var o=function(){r.cache.newVertices[e]?setTimeout(o,200):"properties"==t.event?n.onProperties(t.callback):n.onEdges(t.event,t.filters,t.callback)};o()},i.off=function(){var e=r.inputHandling.doIt(arguments,[{name:"event",type:"vEvent",optional:!0}]);if(e.error)throw e.error;var s=e.event;s?(o.unsubscribe(s+":"+i.URL(),t),"properties"===s&&0===o.subscriptionCount("properties:"+i.URL()),"properties"!==s&&0===o.subscriptionCount("edge_added:"+i.URL()+n.filterString)&&0===o.subscriptionCount("edge_removed:"+i.URL()+n.filterString)&&0===o.subscriptionCount("edge_changed:"+i.URL()+n.filterString)):(o.unsubscribe("properties:"+i.URL(),t),o.unsubscribe("edge_added:"+i.URL()+n.filterString,t),o.unsubscribe("edge_removed:"+i.URL()+n.filterString,t),o.unsubscribe("edge_changed:"+i.URL()+n.filterString,t),0===o.subscriptionCount("properties:"+i.URL()),0===o.subscriptionCount("edge_added:"+i.URL()+n.filterString)&&0===o.subscriptionCount("edge_removed:"+i.URL()+n.filterString)&&0===o.subscriptionCount("edge_changed:"+i.URL()+n.filterString))},i.isValid=function(){var t=r.inputHandling.doIt(arguments,[{name:"callback",type:"function"}]);if(t.error)throw t.error;var n=function(){r.cache.newVertices[e]?setTimeout(n,200):r.interface.isValid(i.URL(),t.callback)};n()},i.setData=function(){var t=r.inputHandling.doIt(arguments,[{name:"data",type:"object"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n=function(){r.cache.newVertices[e]?setTimeout(n,200):r.server.vertex.set(i.URL(),t.data,function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,i)})};n()},i.commitData=function(){var t=r.inputHandling.doIt(arguments,[{name:"apply",type:"function"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n=t.callback,o=function(s){var a,c=r.interface.vertex(e);c.on("properties",function(e,u,h){if(c.off(),!a)if(a=!0,e)n&&n(e,i);else{try{var l=t.apply(h.properties())}catch(f){if(!n)throw e;n(e,i)}if("object"!=typeof l){if(!n)throw"The 'apply' function must return an oject.";n("The 'apply' function must return an oject.",i)}else r.server.vertex.set(i.URL(),l,function(e){if(e)if("301: Unable to update"===e.toString())o(s+1);else{if(!n)throw e;n(e,i)}else n&&n(e,i)},r.cache.timestamps[i.URL()].vertex)}})};o(1)},i.removeData=function(){var t=r.inputHandling.doIt(arguments,[{name:"propertyName",type:"pNameOrArray"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n;n=t.propertyName instanceof Array?t.propertyName:[t.propertyName];var o=function(){r.cache.newVertices[e]?setTimeout(o,200):r.server.vertex.delete(i.URL(),{data:n},function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,i)})};o()},i.destroy=function(t){var n=r.inputHandling.doIt(arguments,[{name:"callback",type:"function",optional:!0}]);if(n.error)throw n.error;var o=function(){r.cache.newVertices[e]?setTimeout(o,200):r.server.vertex.destroy(i.URL(),function(e){if(e){if(!t)throw e;t(e)}else t&&t(e,i)})};o()},i.setEdge=function(){var t=r.inputHandling.doIt(arguments,[{name:"edgeName",type:"eName"},{name:"vRef",type:"vRef",optional:!0},{name:"priority",type:"number",optional:!0,defaultVal:null},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n={};n[t.edgeName]={path:t.vRef?t.vRef.path():(t.vRef=r.interface.create("misc/"+r.util.uuid())).path(),order:t.priority};var o=function(){r.cache.newVertices[e]||r.cache.newVertices[t.vRef.path()]?setTimeout(o,200):r.server.edges.set(i.URL(),n,function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,i,t.vRef)})};o()},i.removeEdge=function(){var t=r.inputHandling.doIt(arguments,[{name:"edgeName",type:"eNameOrArray"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n;n=t.edgeName instanceof Array?t.edgeName:[t.edgeName];var o=function(){r.cache.newVertices[e]?setTimeout(o,200):r.server.edges.delete(i.URL(),{data:n},function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,i)})};o()},i},t.exports=r.interface},{"./../amplify.js":89,"./../config.js":92,"./index.js":83,"./oauthio.js":86}],86:[function(e,t){var r,n=void 0!==window.OAuth;if(n){var o=window.OAuth;delete window.OAuth,e("oauth-js"),r=window.OAuth,window.OAuth=o}else e("oauth-js"),r=window.OAuth,delete window.OAuth;t.exports=r},{"oauth-js":35}],87:[function(e,t){var r=e("./../config.js"),n=e("./index.js"),o=e("./../atomic.js"),i=e("socket.io-client");n.server={realtime:{}},n.server.realtime.socket=i(r.appbaseApiServer+":"+("https"===r.protocol?443:80)),n.server.realtime.socket.on("reconnect",function(){console.log("reconnect");for(var e in n.server.ns.namespacesListening)console.log("re-emitting:",e,"ns"),n.server.realtime.socket.emit("new vertices",n.server.ns.namespacesListening[e]);for(var e in n.server.vertex.urlsListening)n.server.vertex.urlsListening[e].timestamp=void 0!==n.cache.timestamps[e]?n.cache.timestamps[e].vertex:void 0,console.log("re-emitting:",e,"properties"),n.server.realtime.socket.emit("properties",n.server.vertex.urlsListening[e]);for(var e in n.server.edges.urlsListening)n.server.edges.urlsListening[e].timestamp=void 0!==n.cache.timestamps[e]?n.cache.timestamps[e].edges:void 0,console.log("re-emitting:",e,"edges"),n.server.realtime.socket.emit("edges",n.server.vertex.urlsListening[e])}),n.server.search=function(e,t,r){var i={query:t};n.util.setCredsInData(i),o.post(n.server.baseURL+"/"+e+"/~search",i).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},n.server.ns={namespacesListening:{},listen:function(e,t,r){var o=n.util.parseURL(e);o.filters=t.filters,o.listener_id=n.util.uuid(),delete o.key,delete o.obj_path,n.util.setCredsInData(o);var i,s=JSON.stringify(o);n.server.realtime.socket.on(s,i=function(t){if("string"==typeof t){if(delete n.server.edges.urlsListening[e],"STOPPED"===t)return void n.server.realtime.socket.removeListener(s,i);try{r(new Error(t))}catch(o){console.error(e,o)}}else{try{if(void 0!==t[0]){var a=n.cache.get("edges",e),c={};t.forEach(function(e){var t=e.rootPath.slice(e.rootPath.indexOf("/")+1);c[t]=e}),n.cache.set("edges",e,c),n.firing.prepareForNS("RETR",e,a,c)}else{var u=t.vertex,h=u.rootPath?u.rootPath.slice(u.rootPath.indexOf("/")+1):void 0;if(h){var a=n.cache.get("edges",e),l={};switch(l[h]=u,t.optype){case"DESTROY":n.cache.remove("edges",e,[h]);break;case"UPDATE":n.cache.set("edges",e,l)}n.firing.prepareForNS(t.optype,e,a,l)}}}catch(o){console.error(e,o)}try{r(null,t)}catch(o){console.error(e,o)}}}),n.server.ns.namespacesListening[e]=o,n.server.realtime.socket.emit("new vertices",o)},unlisten:function(e){var t=n.server.ns.namespacesListening[e];delete n.server.ns.namespacesListening[e],n.cache.memStore[e]&&(n.cache.memStore[e]={}),t&&(delete t.timestamp,n.server.realtime.socket.emit("new vertices off",t))}},n.server.vertex={urlsListening:{},get:function(e,t){var r={data:[""]};n.util.setCredsInData(r),o.post(e+"/~properties",r).success(function(e){"string"==typeof e?t(new Error(e)):t(null,e)}).error(t)},set:function(e,t,r,i){var s={data:t,timestamp:i};n.util.setCredsInData(s),o.patch(e+"/~properties",s).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},listen:function(e,t,r){var o=n.util.parseURL(e);o.all=t.all,o.data=t.data,o.listener_id=n.util.uuid(),n.util.setCredsInData(o);var i,s=JSON.stringify(o);n.server.realtime.socket.on(s,i=function(t){if("string"==typeof t){if(delete n.server.vertex.urlsListening[e],"STOPPED"===t)return void n.server.realtime.socket.removeListener(s,i);try{r(new Error(t))}catch(o){console.error(e,o)}}else{var a=n.cache.get("vertex",e);switch(t.optype){case"REMOVE ALL":n.cache.remove("vertex",e);break;case"REMOVE":n.cache.remove("vertex",e,Object.keys(t.vertex));break;default:n.cache.set("vertex",e,t.vertex)}t.vertexCache=n.cache.get("vertex",e);try{n.firing.prepareForProperties(t.optype,e,a,t.vertexCache)}catch(o){console.error(e,o)}try{r(null,t)}catch(o){console.error(e,o)}}}),n.server.vertex.urlsListening[e]=o,n.server.realtime.socket.emit("properties",o)},unlisten:function(e){var t=n.server.vertex.urlsListening[e];delete n.server.vertex.urlsListening[e],n.cache.memStore[e]&&(n.cache.memStore[e].vertex={}),t&&(delete t.timestamp,n.server.realtime.socket.emit("properties off",t))},"delete":function(e,t,r){n.util.setCredsInData(t),o.delete(e+"/~properties",t).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},destroy:function(e,t){var r={all:!0};n.util.setCredsInData(r),o.delete(e,r).success(function(e){"string"==typeof e?t(new Error(e)):t(null,e)}).error(t)}},n.server.edges={urlsListening:{},set:function(e,t,r){var i={data:t};n.util.setCredsInData(i),o.patch(e+"/~edges",i).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},unlisten:function(e){var t=n.server.edges.urlsListening[e];delete n.server.edges.urlsListening[e],n.cache.memStore[e]&&(n.cache.memStore[e].edges={}),t&&(delete t.timestamp,n.server.realtime.socket.emit("edges off",t))},listen:function(e,t,r){var o=n.util.parseURL(e);e+=n.util.generateFilterString(t),console.log("listening:",e),o.filters=t.filters,o.listener_id=n.util.uuid(),n.util.setCredsInData(o);var i=JSON.stringify(o);o.timestamp=t.timestamp;var s;n.server.realtime.socket.on(i,s=function(t){if(console.log("arrived:",e),"string"==typeof t){if(delete n.server.edges.urlsListening[e],"STOPPED"===t)return void n.server.realtime.socket.removeListener(i,s);try{r(new Error(t))}catch(o){console.error(e,o)}}else{var a=n.cache.get("edges",e);try{switch(t.optype){case"REMOVE ALL":n.cache.remove("edges",e),n.firing.prepareForEdges(t.optype,e,a,{});break;case"REMOVE":n.cache.remove("edges",e,Object.keys(t.edges)),n.firing.prepareForEdges(t.optype,e,a,t.edges);break;default:for(var c in t.edges)""===t.edges[c].t_id&&delete t.edges[c];n.cache.set("edges",e,t.edges),n.firing.prepareForEdges(t.optype,e,a,t.edges)}}catch(o){console.error(e,o)}t.edgeCache=n.cache.get("edges",e);try{r(null,t)}catch(o){console.error(e,o)}}}),n.server.edges.urlsListening[e]=o,void 0===n.cache.timestamps[e]&&(n.cache.timestamps[e]={}),n.cache.timestamps[e].edges=t.timestamp,o.timestamp=t.timestamp,n.server.realtime.socket.emit("edges",o)},"delete":function(e,t,r){n.util.setCredsInData(t),o.delete(e+"/~edges",t).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)}},n.server.setBaseURL=function(e){n.server.baseURL=n.util.cutLeadingTrailingSlashes(e)},n.server.setApp=function(e){n.server.app=e},n.server.getApp=function(){return n.server.app},n.server.setAppSecret=function(e){n.server.appSecret=e},n.server.setAppbaseToken=function(e){n.server.appbaseToken=e},n.server.getAppbaseToken=function(){return n.server.appbaseToken},n.server.getAppSecret=function(){return n.server.appSecret},n.server.getBaseURL=function(){return n.server.baseURL},n.server.timestamp=function(e){o.get(r.appbaseApiServer+"/time").success(function(t){e(null,t)}).error(function(t){e(t)})},t.exports=n.server},{"./../atomic.js":90,"./../config.js":92,"./index.js":83,"socket.io-client":36}],88:[function(e,t){var r=e("./index.js");r.util={setCredsInData:function(e){return r.server.getAppSecret()?e.secret=r.server.getAppSecret():e.token=r.server.getAppbaseToken(),e},createVertexSnapshot:function(e,t){return t=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(e)),{properties:function(){return t},prevProperties:function(){return e}}},createEdgeSnapshot:function(e,t,r){return{name:function(){return r},prevPriority:function(){return e.order},priority:function(){return t.order}}},cutLeadingTrailingSlashes:function(e){for(;"/"===e.charAt(e.length-1);)e=e.slice(0,-1);for(;"/"===e.charAt(0);)e=e.slice(1);return e},pathToURL:function(e){if(r.server.baseURL)return r.server.baseURL+"/"+r.util.cutLeadingTrailingSlashes(e);throw"baseURL is not set."},URLToPath:function(e){var t;return e.slice(0,-1!==(t=e.indexOf(":",5))?t:void 0).replace(r.server.baseURL+"/","")},uuid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)})},parseURL:function(e){var t;t=e.split(/\/\/(.+)?/)[1].split(/\.(.+)?/),t=t[1].split(/\/(.+)?/)[1].split(/\/(.+)?/);var r=t[0];t=t[1].split(/\/(.+)?/);t[0];t=t[1].split(/\/(.+)?/);var n,o,i=t[0];t[1]&&(t=t[1].split(/\/(.+)?/),n=t[0],o=t[1]);var s={appname:r,namespace:i,key:n,obj_path:o};return s},generateFilterString:function(e){console.log("generating",e);var t=":filters-";return e&&e.filters&&(t+=void 0!==e.filters.startAt?"startAt="+e.filters.startAt+".":"",t+=void 0!==e.filters.endAt?"endAt="+e.filters.endAt+".":"",t+=void 0!==e.filters.limit?"limit="+e.filters.limit+".":"",t+=void 0!==e.filters.skip?"skip="+e.filters.skip+".":""),t+=void 0!==e.timestamp?"timestamp="+e.timestamp+".":""}},t.exports=r.util},{"./index.js":83}],89:[function(e,t){var r;!function(){var e=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},t=[].slice,n={};r={publish:function(e){if("string"!=typeof e)throw new Error("You must provide a valid topic to publish.");console.log("publishing",e);var r,o,i,s,a=t.call(arguments,1),c=0;if(!n[e])return!0;for(r=n[e].slice(),i=r.length;i>c&&(o=r[c],s=o.callback.apply(null,a),s!==!1);c++);return s!==!1},subscriptionCount:function(e){return n[e]?n[e].length:0},subscribe:function(t,r,o){if("string"!=typeof t)throw new Error("You must provide a valid topic to create a subscription.");console.log("subscribing",t),2===arguments.length&&(o=r,r=e());for(var i,s=0,a=t.split(/\s/),c=a.length;c>s;s++){t=a[s],i=!1,n[t]||(n[t]=[]);for(var u=n[t].length-1,h={callback:o,name:r};u>=0;u--)if(n[t][u].name==r){n[t].splice(u,1,h),i=!0;break}i||n[t].unshift(h)}return r},unsubscribe:function(e,t){console.log("unsubscribing",e);var r;if("string"!=typeof e)throw new Error("You must provide a valid topic to remove a subscription.");if(n[e]){if(t)for(var o=n[e].length,i=0;o>i;i++)n[e][i].name===t&&(r=t,n[e].splice(i,1),i--,o--);else{r=[];for(var o=n[e].length,i=0;o>i;i++)r.push(n[e][i].name);n[e]=[]}return r}}}}(),t.exports=r},{}],90:[function(e,t){if("undefined"==typeof window)var r=e("xhr2");else var r=window.XMLHttpRequest;var n={};!function(){var e=function(e){var t;try{t=JSON.parse(e.responseText)}catch(r){t=e.responseText}return[t,e]},t=function(t,n,o){var i={success:function(){},error:function(){}},s=r||ActiveXObject,a=new s("MSXML2.XMLHTTP.3.0");a.open(t,n,!0),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<300?i.success.apply(i,e(a)):i.error.apply(i,e(a)))},a.send(JSON.stringify(o));var c={success:function(e){return i.success=e,c},error:function(e){return i.error=e,c}};return c};n.get=function(e){return t("GET",e)},n.patch=function(e,r){return t("PATCH",e,r)},n.post=function(e,r){return t("POST",e,r)},n["delete"]=function(e,r){return t("DELETE",e,r)}}(),"undefined"!=typeof t&&void 0!==t.exports&&(t.exports=n)},{xhr2:79}],91:[function(e){Appbase=e("./main.js")},{"./main.js":93}],92:[function(e,t){var r={isWindow:"undefined"!=typeof window,protocol:"undefined"!=typeof location&&"https:"===location.protocol?"https":"http"};r.appbaseApiServer=r.protocol+"://api.appbase.io",t.exports=r},{}],93:[function(e,t){var r=e("./config.js"),n=e("./ab/"),o={};r.isWindow&&(o.authPopup=n.interface.auth.authPopup,o.authRedirect=n.interface.auth.authRedirect,o.authCallback=n.interface.auth.callback,o.unauth=n.interface.auth.unauth),o.credentials=function(){var e=n.inputHandling.doIt(arguments,[{name:"appName",type:"app"},{name:"appSecret",type:"secret",optional:!0},{name:"callback",type:"function",optional:!0}]);if(e.error)throw e.error;n.server.setBaseURL(r.appbaseApiServer+"/"+e.appName+"/v2"),n.server.setAppSecret(e.appSecret),r.isWindow&&n.auth.initOauthio(e.appName),n.server.setApp(e.appName);var t=o.ns(o.uuid()).v(o.uuid());void 0!==e.callback&&n.interface.isValid(t.URL(),function(t,r){var n=null!==t&&"021: Invalid secret key"!==t&&"022: Invalid secret key"!==t?t:null;n=n?n:r?"Unexpected result from server while checking for credentials.":null,n?e.callback(n):e.callback(null,"021: Invalid secret key"!==t&&"022: Invalid secret key"!==t)})},o.serverTime=function(){var e=n.inputHandling.doIt(arguments,[{name:"callback",type:"function"}]);if(e.error)throw e.error;n.server.timestamp(e.callback)},o.ns=function(){var e=n.inputHandling.doIt(arguments,[{name:"namespace",type:"ns"}]);if(e.error)throw e.error;return n.interface.ns(e.namespace)},o.uuid=n.util.uuid,t.exports=o},{"./ab/":83,"./config.js":92}]},{},[91]);